<html lang="en" dir="ltr" class="no-js lazy">

<head>
  <!--<link rel="stylesheet" href="ccs/github.css">-->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/image-load.css">
  <link rel="stylesheet" href="css/video-load.css">
  <link rel="stylesheet" href="css/prism.css">
  <!-- <script async src="scripts/menu.js"></script> -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <title></title>
</head>

<body>
<article class="container">
  <h1 id="amp%3A-hopes-and-fears">AMP: Hopes and Fears</h1>
<p>These are my notes and comments from the AMP Roadshow in Sunnyvale on April 4.</p>
<p>The questions/issues I have are in bold throughout the rest of the article.</p>
<p>&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;at the &lt;a href=&quot;https://twitter.com/hashtag/amproadshow?src=hash&amp;ref_src=twsrc%5Etfw&quot;&gt;#amproadshow&lt;/a&gt; learning about AMP, what's next and what cool things you can do with it. &lt;br&gt;&lt;br&gt;I'm ambivalent about AMP and am hoping to be convinced otherwise&lt;/p&gt;— Carlos Araya (@elrond25) &lt;a href=&quot;https://twitter.com/elrond25/status/981572956496183296?ref_src=twsrc%5Etfw&quot;&gt;April 4, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</p>
<h2 id="what-problem-is-amp-trying-to-solve%3F">What problem is AMP trying to solve?</h2>
<p>Particularly since the introduction of AMP stories and the loosening JavaScript restrictions on adding JavaScript to AMP content it's starting to look just like another optimized library to create web content and, furthermore, the AMP cache is starting to look more and more like the old m-dot mobile sites of yesterday. When using an AMP cache link on desktop I've been redirected to the desktop version of the site and not given access to the AMP version; my expectation is that links to the cache will point me towards the AMP version of the content regardless of what form factor I'm using to access it.</p>
<p>So it begs the question:</p>
<p><strong>Beyond performance, what else are we trying to solve with it?</strong></p>
<h2 id="user-experience">User experience</h2>
<p>One of the things that bothers me is that AMP looks like it wants to replace most other web technologies that try to improve the user experience.</p>
<p>This is part of a more general question about my wondering why Google competes with itself in so many different categories? In the web space is AMP trying to provide a single solution that will work instead of existing web properties like Polymer and Angular?</p>
<p>So, it begs the first question in this category.</p>
<p><strong><em>If this is for best users experiences why not support technologies that enhance what's already there instead of creating something new?</em></strong></p>
<p>It may be true that this wouldn't solve the bloat problem of the web as it is today, but I don't think that being overly restrictive is a good solution either.  AMP proposes a solution now and, to be honest, I can't think of a better.</p>
<p>The AMP team acts as gatekeepers for what is and isn't part of the AMP stack and platform. My problem, for example, is that I can't run the <a href="https://prismjs.com">Prism syntax highlighter</a> into AMP code (mine is generated by WordPress' wp-amp plugin compiled from source). It works under normal circumstances when used with non-AMP content so why should AMP content be any different? It may be true that I need to enable asynchronous highlighting on the Prism side of the equation but not because it's a requirement to use a library.</p>
<p>As an aide, Prism does support asynchronous highlighting, just not by default.</p>
<blockquote>
<p><strong>Why is asynchronous highlighting disabled by default?</strong></p>
<p>Web Workers are good for preventing syntax highlighting of really large code blocks from blocking the main UI thread. In most cases, you will want to highlight reasonably sized chunks of code, and this will not be needed. Furthermore, using Web Workers is actually  <strong>slower</strong>  than synchronously highlighting, due to the overhead of creating and terminating the Worker. It just appears faster in these cases because it doesn't block the main thread. In addition, since Web Workers operate on files instead of objects, plugins that hook on core parts of Prism (e.g. modify language definitions) will not work unless included in the same file (using the builder in the  <a href="http://prismjs.com/download.html">Download</a> page will protect you from this pitfall). Lastly, Web Workers cannot interact with the DOM and most other APIs (e.g. the console), so they are notoriously hard to debug.</p>
<p>From the <a href="http://prismjs.com/faq.html#why-is-asynchronous-highlighting-disabled-by-default">Prism FAQ</a></p>
</blockquote>
<p>Since we can't use JavaScript on AMP content, how can we leverage web APIs without being forced to use AMP supported wrappers? I understand that you're working on relaxing the restriction of using JavaScript in AMP content and experimenting with using workers to offload running scripts (<code>amp-script</code>) but, right now, I can't use any APIs that the AMP team doesn't allow.  Some of my issues in this area:</p>
<ul>
<li>If we need AMP sanctioned wrappers for scripted and interactive content, How many wrappers will we need to address users' content cases?</li>
<li>How many proposed wrappers are approved. My own experience with filling an issue on Syntax highlighting leaves me somewhat less than hopeful in that area (<a href="https://github.com/ampproject/amphtml/issues/14425">issue 14425</a> in the AMP repository, for completeness sake)</li>
</ul>
<p>All JavaScript APIs require some sort of launch script or a link inside the page that is using it... neither of which is allowed in AMP by default.  If we pick features like service workers we have the initialization script (replaced with AMP's <a href="https://ampbyexample.com/components/amp-install-serviceworker/">amp-install-serviceworker</a>, and most other examples should be covered by using <a href="https://ampbyexample.com/components/amp-iframe/">amp-iframe</a> and <a href="https://ampbyexample.com/components/amp-bind/">amp-bind</a> but only if you choose to work with iframes in your pages and learn the AMP way of doing things.</p>
<p>If we move to talk about CSS features, they fall under another restriction in the AMP platform. They don't apply here.</p>
<p>Until the AMP team relaxes the restrictions for scripts on AMP content the AMP library itself will not accept scripts other than the ones they whitelist, so whenever you need a script that is not approved by AMP the page will still work but it will lose all benefits from AMP.</p>
<p>In my case with my code highlights I still get something that looks different enough from my content to be distinguishable from prose but not what I expected as syntax highlighted code.</p>
<p>I guess I could pre-process the content and insert the elements I need before the content is loaded but doesn't that defeat the purpose? If we move everything to the server and pre-process, server side render the content and preload, aren't we inviting the same types of bottlenecks and potential rendering delays because of user's network connectivity?</p>
<h2 id="where-to-go-if-there's-a-problem%3F">Where to go if there's a problem?</h2>
<p>Until better debugging tooling is available it's very hard to do good AMP development. Given all the restrictions of what you can't do and how you should do what you can, it's hard to remember that your primary debugging tools for AMP are the browser's Dev Tools and the Google Search Console for your site, assuming that you're after SEO and Google SERP preloading, and while they are good tools they are not what most people use to debug HTML.</p>
<p>Most people won't bother to check the search console to see if there is a problem with search and AMP or know how to fix it so having AMP working is not guarantee that the tool is working properly, or at all...</p>
<p>I had a problem with linked data being incorrect, The AMP validator did not check for correct syntax in the JSON-LD content, so I got no validation errors and only found out that there was a problem (and that it had been fixed) when I went to the Google Search Console looking for something else.</p>
<p>AMP is different from most tools out there. If we misconfigure a script we expect it to fail. However, if we miss a tag or misquote an attribute in HTML the expectation, right or wrong, is that the page, up to the point where the error happened, will still render.  With AMP I'm not certain this is the case, at least it wasn't my experience.</p>
<p>So whose responsibility is it? Mine? The plugin developer? The AMP team?</p>
<p>I also don't know if <a href="https://www.ampproject.org/docs/troubleshooting/validation_errors">AMP Validation Errors</a> will cause the page not to render or if these are warnings of things that must be fixed to be compliant.</p>
<h3 id="garbage-in%2C-garbage-out">Garbage in, Garbage out</h3>
<p>I host my own installation of Wordpress so this is less of an issue for me. But for the people who host content in Wordppress.com this may come in as a surprise: AMP is enabled by default! (see <a href="https://en.support.wordpress.com/amp-accelerated-mobile-pages/">AMP (Accelerated Mobile Pages)</a> in the Wordpress.com support site).</p>
<p>Twitter is also sending users to AMP version of the content (when available) by default. Shouldn't this be an opt in experience rather than opt out or no choice at all?</p>
<p>This is less of an issue for Twitter and self-hosted versions of Wordpress than it is for Wordpres.com hosted  blogs because in the earlier cases, it's a conscious action to link to an AMP resource or install and activate the plugin. In Wordpress.com it's a setting enabled by default so it'll publish AMP until you, the content creator, disable it. This means that Wordpress.com authors may not be aware that they are publishing AMP for their blog. This is not a problem the AMP team but, in my opinion, will reflect on AMP the platform.</p>
<p>If we get low-quality content pushed into AMP nobody wins.</p>
<h2 id="duplicating-effort%3F">Duplicating effort?</h2>
<p>When AMP first came out as an optimization library I had my reservations but saw it as an interim solution to the mobile performance issues that I see documented everywhere and that have gotten progressively worse.</p>
<p>When I first saw AMP, I saw it sold as a performance improvement for mobile load. It may not be the purpose behind the project but that's how most people see it.</p>
<p>But even if the assumption that AMP is all about mobile performance (and, according to the AMP team, it is not) that is changing in ways that I wasn't expecting.</p>
<p>The concept of stories at least according to the news I've read out there, throws the concept of non-AMP sites out the window. If there is no equivalency check, what will search engines do when the content is different? Which version of the content will get priority?</p>
<p>According to <a href="https://searchengineland.com/amp-stories-new-accelerated-mobile-pages-format-google-291907">Search Engine Land</a>:</p>
<blockquote>
<p>Breaking with previous guidance, Google does not intend for this type of AMP content to match your non-mobile content. Instead, this mobile-only content should be unique. I followed up on this point with a Google rep, who characterized AMP Story content this way:</p>
<blockquote>
<p>AMP stories is all about encouraging new forms of expression and storytelling, so we expect most publishers to not be already publishing this kind of content out on the web currently. AMP stories is meant to facilitate this and make it easier.</p>
</blockquote>
<p>The rep also added that “AMP Story content should be fulfilling and standalone.”</p>
<p>Because Google has historically argued specifically against creating different content for different users, this new “separate but equal” stance surprised me. Google further explained:</p>
<blockquote>
<p>This does not run counter to the idea that the publisher may also have separate expressions [of] similar content published. Say a publisher has a long-form analysis article about college admissions data. Then, say they have a companion piece that’s an interactive experience letting people play with the data through charts and other visualizations. It wouldn’t be correct to call the long-form piece the canonical for the interactive. They each stand on their own, although being related.</p>
</blockquote>
</blockquote>
<p>This bothers me in so many levels but I'll start with the most basic concern and fear: Are we turning the mobile web into a single-vendor experience? Will this difference between stories and web content force publishers into AMP or be left behind by not providing good results in the search page?</p>
<p>AMP like many major projects like Angular, React, Bootstrap and  Polymer are Open Source but the company that originally released the software maintains certain level of control either in the decision making process or in vetting changes to the codebase</p>
<p>How about leveraging other parts of the web platform to tell the same type of stories you do with AMP? Again, isn't improving the whole web experience the name of the game? Having looked deeper at the stack AMP uses I can see a lot of good practices  and things we should all be doing to improve users' experience with our web content.  Creating a brand-new product that hides all the best practices under a set of restrictions and custom elements may not be the way to provide the interim solution that will work and teach the best practices that people, particularly beginners, need to learn.</p>
<h2 id="technical-questions">Technical questions</h2>
<p>There are technical questions that came up when researching AMP and writing this post a few more technical questions</p>
<h3 id="converting-your-content%3F">Converting your content?</h3>
<p>In talking to people at the Roadshow I now understand that AMP is a testbed to make things better and then bring it back to the wider web community; this is an important goal. I just have issues with the way AMP is doing this.</p>
<p>The example below is a basic sample HTML document conforming to the AMP HTML specification.</p>
<pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token name">doctype</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">⚡</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Sample document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canonical<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./regular-html-version.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width,minimum-scale=1,initial-scale=1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">amp-custom</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
      <span class="token selector">h1</span> <span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>application/ld+json<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token punctuation">{</span>
      <span class="token string">"@context"</span><span class="token operator">:</span> <span class="token string">"http://schema.org"</span><span class="token punctuation">,</span>
      <span class="token string">"@type"</span><span class="token operator">:</span> <span class="token string">"NewsArticle"</span><span class="token punctuation">,</span>
      <span class="token string">"headline"</span><span class="token operator">:</span> <span class="token string">"Article headline"</span><span class="token punctuation">,</span>
      <span class="token string">"image"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"thumbnail1.jpg"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"datePublished"</span><span class="token operator">:</span> <span class="token string">"2015-02-05T08:00:00+08:00"</span>
    <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">custom-element</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>amp-carousel<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.ampproject.org/v0/amp-carousel-0.1.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">amp-boilerplate</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><span class="token selector">body</span><span class="token punctuation">{</span><span class="token property">-webkit-animation</span><span class="token punctuation">:</span>-amp-start 8s <span class="token function">steps</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span>end<span class="token punctuation">)</span> 0s 1 normal both<span class="token punctuation">;</span><span class="token property">-moz-animation</span><span class="token punctuation">:</span>-amp-start 8s <span class="token function">steps</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span>end<span class="token punctuation">)</span> 0s 1 normal both<span class="token punctuation">;</span><span class="token property">-ms-animation</span><span class="token punctuation">:</span>-amp-start 8s <span class="token function">steps</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span>end<span class="token punctuation">)</span> 0s 1 normal both<span class="token punctuation">;</span><span class="token property">animation</span><span class="token punctuation">:</span>-amp-start 8s <span class="token function">steps</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span>end<span class="token punctuation">)</span> 0s 1 normal both<span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@-webkit-keyframes</span> -amp-start</span><span class="token punctuation">{</span><span class="token selector">from</span><span class="token punctuation">{</span><span class="token property">visibility</span><span class="token punctuation">:</span>hidden<span class="token punctuation">}</span><span class="token selector">to</span><span class="token punctuation">{</span><span class="token property">visibility</span><span class="token punctuation">:</span>visible<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@-moz-keyframes</span> -amp-start</span><span class="token punctuation">{</span><span class="token selector">from</span><span class="token punctuation">{</span><span class="token property">visibility</span><span class="token punctuation">:</span>hidden<span class="token punctuation">}</span><span class="token selector">to</span><span class="token punctuation">{</span><span class="token property">visibility</span><span class="token punctuation">:</span>visible<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@-ms-keyframes</span> -amp-start</span><span class="token punctuation">{</span><span class="token selector">from</span><span class="token punctuation">{</span><span class="token property">visibility</span><span class="token punctuation">:</span>hidden<span class="token punctuation">}</span><span class="token selector">to</span><span class="token punctuation">{</span><span class="token property">visibility</span><span class="token punctuation">:</span>visible<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@-o-keyframes</span> -amp-start</span><span class="token punctuation">{</span><span class="token selector">from</span><span class="token punctuation">{</span><span class="token property">visibility</span><span class="token punctuation">:</span>hidden<span class="token punctuation">}</span><span class="token selector">to</span><span class="token punctuation">{</span><span class="token property">visibility</span><span class="token punctuation">:</span>visible<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@keyframes</span> -amp-start</span><span class="token punctuation">{</span><span class="token selector">from</span><span class="token punctuation">{</span><span class="token property">visibility</span><span class="token punctuation">:</span>hidden<span class="token punctuation">}</span><span class="token selector">to</span><span class="token punctuation">{</span><span class="token property">visibility</span><span class="token punctuation">:</span>visible<span class="token punctuation">}</span><span class="token punctuation">}</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">amp-boilerplate</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><span class="token selector">body</span><span class="token punctuation">{</span><span class="token property">-webkit-animation</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span><span class="token property">-moz-animation</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span><span class="token property">-ms-animation</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span><span class="token property">animation</span><span class="token punctuation">:</span>none<span class="token punctuation">}</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>noscript</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.ampproject.org/v0.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Sample document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
      Some text
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>amp-img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>sample.jpg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>300</span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>300</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>amp-img</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>amp-ad</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>300</span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>250</span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a9<span class="token punctuation">"</span></span>
        <span class="token attr-name">data-aax_size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300x250<span class="token punctuation">"</span></span>
        <span class="token attr-name">data-aax_pubname</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test123<span class="token punctuation">"</span></span>
        <span class="token attr-name">data-aax_src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>302<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>amp-ad</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre>
<p>Some of the requirements and limitations of AMP are not evident. According to <a href="https://www.ampproject.org/docs/fundamentals/spec">AMP HTML Specification</a> an AMP document must:</p>
<ul>
<li>start with the doctype &lt;!doctype html&gt;</li>
<li>contain a top-level <code>&lt;html ⚡&gt;</code> tag (<code>&lt;html amp&gt;</code> is accepted as well)</li>
<li>contain <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code> tags (They are optional in HTML)</li>
<li>contain a <code>&lt;link rel=&quot;canonical&quot; href=&quot;$SOME\_URL&quot;&gt;</code> tag inside their head that points to the regular HTML version of the AMP HTML document or to itself if no such HTML version exists</li>
<li>contain a <code>&lt;meta charset=&quot;utf-8&quot;&gt;</code> tag as the first child of their head tag</li>
<li>contain a <code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,minimum-scale=1&quot;&gt;</code> tag inside their head tag. It's also recommended to include initial-scale=1</li>
<li>contain a <code>&lt;script async src=&quot;https://cdn.ampproject.org/v0.js&quot;&gt;&lt;/script&gt;</code> tag inside their head tag</li>
<li>contain the AMP boilerplate code (<code>head &gt; style[amp-boilerplate]</code> and <code>noscript &gt; style[amp-boilerplate]</code>) in their head tag</li>
</ul>
<p>If this was all that AMP required for compliance I'd be ok. I've always been a gun-ho fan of proper page structure and including the appropriate elements where they should be. Death to tagsoup markup!</p>
<p>I love the idea of having metadata inlined in the document. This makes it easier to enforce (it's part of the AMP html spec) but it may make it harder to support in the long run as any change to the doc would require.</p>
<p>I may even forgive the extra attribute (other than class) in the html element.</p>
<p>But this is just the beginning.</p>
<p>Amp not only requires a certain structure from your HTML page but it changes some elements for AMP-specific ones and completely disallows others. I'm mostly OK with the tag it forbids as they are mostly legacy elements that have been kept on the specifications for compatibility (don't break the web) reasons. I mean, seriously, frameset and frames? It's 2018 people... we have better ways of doing that!</p>
<p>The table below (also from the <a href="https://www.ampproject.org/docs/fundamentals/spec">AMP HTML Specification</a>) explains the limitations and changes that AMP makes to standard HTML elements. Some of these changes help explain the structure of the example page seen earlier.</p>
<p>&lt;table&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;th width=&quot;30%&quot;&gt;Tag&lt;/th&gt;
&lt;th&gt;Status in AMP HTML&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;script&lt;/td&gt;
&lt;td&gt;Prohibited unless the type is &lt;code&gt;application/ld+json&lt;/code&gt;. (Other non-executable values may be added as needed.) Exception is the mandatory script tag to load the AMP runtime and the script tags to load extended components.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;noscript&lt;/td&gt;
&lt;td&gt;Allowed. Can be used anywhere in the document. If specified, the content inside the &lt;code&gt;&lt;noscript&gt;&lt;/code&gt; element displays if JavaScript is disabled by the user.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;base&lt;/td&gt;
&lt;td&gt;Prohibited.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;img&lt;/td&gt;
&lt;td&gt;Replaced with &lt;code&gt;amp-img&lt;/code&gt;.&lt;br&gt;
Please note: &lt;code&gt;&lt;img&gt;&lt;/code&gt; is a &lt;a href=&quot;https://www.w3.org/TR/html5/syntax.html#void-elements&quot;&gt;Void Element according to HTML5&lt;/a&gt;, so it does not have an end tag. However, &lt;code&gt;&lt;amp-img&gt;&lt;/code&gt; does have an end tag &lt;code&gt;&lt;/amp-img&gt;&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;video&lt;/td&gt;
&lt;td&gt;Replaced with &lt;code&gt;amp-video&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;audio&lt;/td&gt;
&lt;td&gt;Replaced with &lt;code&gt;amp-audio&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;iframe&lt;/td&gt;
&lt;td&gt;Replaced with &lt;code&gt;amp-iframe&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;frame&lt;/td&gt;
&lt;td&gt;Prohibited.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;frameset&lt;/td&gt;
&lt;td&gt;Prohibited.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;object&lt;/td&gt;
&lt;td&gt;Prohibited.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;param&lt;/td&gt;
&lt;td&gt;Prohibited.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;applet&lt;/td&gt;
&lt;td&gt;Prohibited.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;embed&lt;/td&gt;
&lt;td&gt;Prohibited.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;form&lt;/td&gt;
&lt;td&gt;Allowed. Require including &lt;a href=&quot;https://www.ampproject.org/docs/reference/components/amp-form&quot;&gt;amp-form&lt;/a&gt; extension.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;input elements&lt;/td&gt;
&lt;td&gt;Mostly allowed with &lt;a href=&quot;https://www.ampproject.org/docs/reference/components/amp-form#inputs-and-fields&quot;&gt;exception of some input types&lt;/a&gt;, namely, &lt;code&gt;&lt;input[type=image]&gt;&lt;/code&gt;, &lt;code&gt;&lt;input[type=button]&gt;&lt;/code&gt;, &lt;code&gt;&lt;input[type=password]&gt;&lt;/code&gt;, &lt;code&gt;&lt;input[type=file]&gt;&lt;/code&gt; are invalid. Related tags are also allowed: &lt;code&gt;&lt;fieldset&gt;&lt;/code&gt;, &lt;code&gt;&lt;label&gt;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;button&lt;/td&gt;
&lt;td&gt;Allowed.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;style&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;#boilerplate&quot;&gt;Required style tag for amp-boilerplate&lt;/a&gt;. One additional style tag is allowed in head tag for the purpose of custom styling. This style tag must have the attribute &lt;code&gt;amp-custom&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;link&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rel&lt;/code&gt; values registered on &lt;a href=&quot;http://microformats.org/wiki/existing-rel-values&quot;&gt;microformats.org&lt;/a&gt; are allowed. If a &lt;code&gt;rel&lt;/code&gt; value is missing from our whitelist, &lt;a href=&quot;https://github.com/ampproject/amphtml/issues/new&quot;&gt;please submit an issue&lt;/a&gt;. &lt;code&gt;stylesheet&lt;/code&gt; and other values like &lt;code&gt;preconnect&lt;/code&gt;, &lt;code&gt;prerender&lt;/code&gt; and &lt;code&gt;prefetch&lt;/code&gt; that have side effects in the browser are disallowed. There is a special case for fetching stylesheets from whitelisted font providers.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;meta&lt;/td&gt;
&lt;td&gt;The &lt;code&gt;http-equiv&lt;/code&gt; attribute may be used for specific allowable values; see the &lt;a href=&quot;https://github.com/ampproject/amphtml/blob/master/validator/validator-main.protoascii&quot;&gt;AMP validator specification&lt;/a&gt; for details.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;a&lt;/td&gt;
&lt;td&gt;The &lt;code&gt;href&lt;/code&gt; attribute value must not begin with &lt;code&gt;javascript:&lt;/code&gt;. If set, the &lt;code&gt;target&lt;/code&gt; attribute value must be &lt;code&gt;_blank&lt;/code&gt;. Otherwise allowed.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td width=&quot;30%&quot;&gt;svg&lt;/td&gt;
&lt;td&gt;Most SVG elements are allowed.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;</p>
<p>But it's the changes that they make to standard HTML elements that worry me. Do we really need an image custom element? video? audio?</p>
<p>The docs say it's ok to use <code>link rel=manfiest</code> but there are no references in the specification that `link rel=&quot;manifest&quot; is allowed.</p>
<p>I don't think this solves the underlying problems of the web. It doesn't change the fact that loading speed and payload size numbers are getting slower and bigger, not faster and smaller for the mobile web.</p>
<p>See the HTTP Archive <a href="https://httparchive.org/reports/loading-speed?start=2017_01_01&amp;end=latest">comparison data between January 1, 2017 and March 15, 2018</a> for an idea of what I'm talking about.</p>
<p>Granted, the HTTPArchive crawl may not catch AMP pages in its mobile results and that the pages in the crawl may not have a link to the AMP version of the page so the numbers may not reflect the actual improvements (if any) that AMP has made on the web. That said, I expect the numbers to change, one way or another, in future HTTP Archive cralws as they incorporate <a href="https://www.wappalyzer.com/">Wappalyzer</a> as a tool in future crawls.</p>
<p>But AMP doesn't change the fact that we still have megabytes of images, even if they are compressed (if we get more space we'll just load more of them) huge bundles of JavaScript that will take tens of seconds to load and unblock page rendering on the web.</p>
<p>Even though people, companies and doc sites have been promoting best practices for years there has been no real improvement on how we work on the web and AMP, by hiding all the implementation details of lazy loading,</p>
<p>There are many more solutions outside of AMP that will give you performant web content. I think the biggest issue is that people may not know or may not care about these new technologies and smaller libraries that will take care of some performance bottlenecks.</p>
<h3 id="generating-amp%3F">Generating AMP?</h3>
<p>Hand writing AMP is different than writing HTML but how do we generate AMP when working with CMS other than Wordpress? How much do we need to retool our systems based on the restrictions imposed by AMP?</p>
<p>Condé Nast has published information on <a href="https://technology.condenast.com/story/evolving-google-amp-at-conde-nast">how they generate the AMP content</a> for each of their publications: Allure, Architectural Digest, Ars Technica, Backchannel, Bon Appétit, Brides, Condé Nast Traveler, Epicurious, Glamour, Golf Digest, GQ, Pitchfork, Self, Teen Vogue, The New Yorker, Vanity Fair, Vogue, W and Wired.</p>
<p>Their system is fairly intricate as the image below illustrates:</p>
<p>&lt;figure&gt;
&lt;img src='https://media.condenast.io/photos/59a57e16cf742825d0b02891/master/w_680/AMP-Arch.png' alt='AMP Generation Process at Condé Nast' width=&quot;100%&quot; height=&quot;auto&quot;&gt;
&lt;figcaption&gt;AMP Generation Process at Condé Nast. From &lt;a href=&quot;https://technology.condenast.com/story/the-why-and-how-of-google-amp-at-conde-nast&quot;&gt;The Why and How of Google AMP at Condé Nast&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;</p>
<p>And the AMP generation process itself looks like it's rather complex, running from Markdown to React that then converts the Markdown content into valid AMP HTML:</p>
<p>&lt;figure&gt;
&lt;img src='https://media.condenast.io/photos/59a57e3dcf742825d0b02893/master/w_680/AMP-Pipeline.png' width=&quot;100%&quot; height=&quot;auto&quot; alt='alt-text'&gt;
&lt;figcaption&gt;Condé Nast AMP Service Pipeline. From &lt;a href=&quot;https://technology.condenast.com/story/the-why-and-how-of-google-amp-at-conde-nast&quot;&gt;The Why and How of Google AMP at Condé Nast&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;</p>
<p>So now we have to insert a way to identify when we want our CMS to serve AMP content and an AMP conversion process into our pipeline... but only for our AMP optimized content, right? I go back to the question I asked earlier about creating AMP only sites: Are they necessary?</p>
<p>Furthermore, I'm concerned about the amount of work needed to get AMP into a CMS. If you're not using a commercially available platform, how do you build AMP in addition to the standard content? As we saw in Converting your content? the restrictions of an AMP page are different than those of normal HTML (even if some of the restrictions are sensible and make sense). Sure we have WordPress and several other CMS platforms from AMP's <a href="https://www.ampproject.org/support/faqs/supported-platforms">Supported Platforms, Vendors and Partners</a> page:</p>
<p>&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.ampize.me&quot;&gt;AMPize.me&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.arcpublishing.com&quot;&gt;Arc Publishing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.roya.com/blog/roya-announces-addition-of-amp-to-canvas-cms-amp.html&quot;&gt;Canvas&lt;/a&gt; &lt;/li&gt;
&lt;li&gt; &lt;a href=&quot;https://www.drupal.org/project/amp&quot;&gt;Drupal&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.fastcommerce.com.br/accelerated-mobile-pages-amp&quot;&gt;Fastcommerce&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://help.hatenablog.com/entry/amp&quot;&gt;Hatena&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Kentico/kentico-amp&quot;&gt;Kentico&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://atenea.marfeel.com/atn/product/marfeel-press/360-platform/google-amp/marfeel-s-accelerated-mobile-pages-google-amp-solution&quot;&gt;Marfeel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gomobile.jp/rabbit/&quot;&gt;Rabbit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://support.squarespace.com/hc/en-us/articles/223766868-Using-AMP-with-Squarespace&quot;&gt;Squarespace&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://textpattern.com/weblog/401/textpattern-website-redesign/amp&quot;&gt;Textpattern&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.townnews365.com/&quot;&gt;TownNews&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.tumblr.com/about&quot;&gt;Tumblr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://en.support.wordpress.com/google-amp-accelerated-mobile-pages/&quot;&gt;WordPress.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://wordpress.org/plugins/amp/&quot;&gt;WordPress.org&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</p>
<p>Another thing that comes to mind when it comes to generating AMP programmatically is how much of the CSS we use in our normal site can we use with AMP?</p>
<p>The AMP specification requires developers to use no more than 50kb of CSS and, on its face, it's a sensible requirement. That is until we realize that CSS animations and any extra prefixing we need to acomodate browser idiosyncrasies would also fall under that limitation and we need to decide early on how will we make the CSS fit into the 50KB requirements or how much to take out to make the CSS fit the size restriction and still keep branding folks happy.</p>
<p>This is not to say we should dump hundred and hundred of lines of useless CSS into our pages but we should be the ones who decide how much CSS we use and how the CSS we use interacts with the existing content of the page.</p>
<p>Same thing with JavaScript.</p>
<h3 id="specific-use-cases">Specific Use Cases</h3>
<p>My specific cases are <a href="https://codepen.io/">Codepen</a> embeds and <a href="http://prismjs.com/">Prism.js</a> code syntax highlighting.</p>
<p>The typical Codepen emebd looks like this:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">data-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>438<span class="token punctuation">"</span></span> <span class="token attr-name">data-theme-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dark<span class="token punctuation">"</span></span> <span class="token attr-name">data-slug-hash</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>MGWazx<span class="token punctuation">"</span></span> <span class="token attr-name">data-default-tab</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>html,result<span class="token punctuation">"</span></span> <span class="token attr-name">data-user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>caraya<span class="token punctuation">"</span></span> <span class="token attr-name">data-embed-version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">data-pen-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Card Grid Component for Themeable Design System<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>codepen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>See the Pen <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://codepen.io/caraya/pen/MGWazx/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Card Grid Component for Themeable Design System<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> by Carlos Araya (<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://codepen.io/caraya<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>@caraya<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>) on <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://codepen.io<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>CodePen<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://static.codepen.io/assets/embed/ei.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p>As far as I understand AMP, this would not work in an AMP page. AMP will not let you use script tags in a page, and even if AMP allows data-* attributes on elements they are useless because there's nothing to process them with.</p>
<p>Same thing with Prism. It works by adding a script and a style sheet to the page and then expects properly coded blocks of preformated text for the content to be highlighted. To validate AMP content I am not allowed to have additional script tags on the head or before the end of my document and, in theory, I should be able to merge Prism's CSS with the AMP required CSS and my site's CSS but would that work in 50KB of CSS that we're allowed to add?</p>
<p>And yes, I know that Codepen also provides <code>iframes</code> for embedding pens but it's not the recomended form to do so.</p>
<h3 id="cors-for-my-own-site%3F">CORS for my own site?</h3>
<p>One of the biggest issues is hosting the content in a Google-based and supported CDN. This causes the large, ugly URLs (like https://www-gq-com.cdn.ampproject.org/c/s/www.gq.com/story/gq-eye-exclusive-fatherhood-style-series---todd-snyder or https://www-gq-com.cdn.ampproject.org/c/s/www.gq.com/) but also has an interesting side effect that makes CORS necessary for your own content.</p>
<p>When you go to a site, for example: https://www.gq.com/story/gq-eye-exclusive-fatherhood-style-series---todd-snyder in a mobile device it'll redirect you to the version hosted in the AMP CDN which turns into https://www-gq-com.cdn.ampproject.org/c/s/www.gq.com/story/gq-eye-exclusive-fatherhood-style-series---todd-snyder and caches it to guarantee preloads and seemingly instant first load experiences.</p>
<p>But what happens if you need to load data for your application? Say you want to load product data for your shopping cart, or a tour date list for your favorite band? Those are stored on your server, not the cache and for them to work properly you need to set CORS headers on them so they will work for origins other than yours.</p>
<p>On a side note, if you hit the AMP cache URL from a desktop browser it will redirect you to the desktop, however, if you hit an AMP link using an activation script like https://www.gq.com/story/gq-eye-exclusive-fatherhood-style-series---todd-snyder/amp it will take you to the AMP version, regardless of platform or form factor. I find this even more interesting, why restrict some ways to access the content from some form factors and not others? Am I missing the point of the URLs?</p>
<h3 id="performance">Performance</h3>
<p>People have been working with performance for years. The early work Ilia Grigorik and Addy Osmani did and continue to do at Google, tools like UNCSS, the fact that we can precache and preload content (but not provide automatic preloading like Google does with AMP search results), the fact that we have PWA and its component technologiestechnologiies available within and outside PWAs really makes me wonder how lazy we've become as developers.</p>
<p>I'll take three examples of things we can do now to make experiences outside of an AMP environment: Image Optimization, Resource PrioritizationPioritization and Service Workers.</p>
<p>We know that images make up for a large fraction of what gets pushed into a web page, we don't evangelize tools like <a href="https://github.com/imagemin/imagemin">Imagemin</a> and workflows that use these tools to generate smaller images.</p>
<p>Does amp-image really reduce the bloat problem? If you make the images smaller that means people will put even more images in a page because the size of each individual image is smaller so we can use more of them, we don't need to worry about the individual image, AMP will take care of that.</p>
<p>It is not hard to create a good <a href="https://developers.google.com/web/fundamentals/performance/resource-prioritization">resource prioritization</a> strategy using a combination of H2 Push, link preload, prefetch, prerender and dns-prefetch to load resources the way we want them to. If we compare this with lazy loading content so they will only load when needed, we have a much better web experience. In talking to people there was some reference to Jake Archibald's <a href="https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/">HTTP2 is tougher than I thought</a> but I believe the issue is with browser implementation, not necessarily with the technology itself.  If need be we can configure the server to push fonts, styles, images and other resources; as well as do other performance optimizations without having to change the content of the pages (discussed in <a href="https://publishing-project.rivendellweb.net/web-performance-improvement/">Web Performance Improvement</a>).</p>
<p>Service workers can also help improve performance of your web content after the initial visit. We can use it to keep a persistent cache of content for our site or application that can be populated and expired as needed. Libraries like <a href="https://developers.google.com/web/tools/workbox/">Workbox</a> can help us make this process easier.</p>
<p>I recently came acrossaccross Tim Kladlec's <a href="https://timkadlec.com/remembers/2018-03-19-how-fast-is-amp-really/">How Fast Is Amp Really?</a> performance analysis of AMP content served in different ways:</p>
<ol>
<li>How well does AMP perform in the context of Google search?</li>
<li>How well does the AMP library perform when used as a standalone framework?</li>
<li>How well does AMP perform when the library is served using the AMP cache?</li>
<li>How well does AMP perform compared to the canonical article?</li>
</ol>
<p>His findings mirror my opinion about AMP not doing anything that we can't do in the open web. To me, the most, important section of Tim's article is when he talks about page weight reduction:</p>
<blockquote>
<p>The 90th percentile weight for the canonical version is 5,229kb. The 90th percentile weight for AMP documents served from the same origin is 1,553kb— a savings of around 70% in page weight. The 90th percentile request count for the canonical version is 647, for AMP documents it's 151. That's a reduction of nearly 77%.</p>
<p>AMP's restrictions mean less stuff. It's a concession publishers are willing to make in exchange for the enhanced distribution Google provides, but that they hesitate to make for their canonical versions.</p>
<p>If we're grading AMP on the goal of making the web faster, the evidence isn't particularly compelling. Every single one of these publishers has an AMP version of these articles in addition to a non-AMP version.</p>
<p>From: <a href="https://timkadlec.com/remembers/2018-03-19-how-fast-is-amp-really/">How Fast Is Amp Really?</a></p>
</blockquote>
<p>AMP restricts what you can do with JavaScript and what you can do with custom AMP elements restricts what you can do on your pages and, regardless of the reasons why you put the restrictions in place, it shouldn't be up to a library or framework to dictate how much stuff you put in a page but it's up to the designers and developers to slim down their content... easier said than done, I know, but AMP hasn't sold me as the solution or even a good solution to this problem and neither do publishers, otherwise AMP would be the only version of all published web content.</p>
<p>The other interesting aspect of this conversation is what happens to search engines like Bing or other platforms that don't support cannonical links?</p>
<p>The final, technical, question I have is how well AMP works in low end and feature phones or for people using Proxy browsers such as Opera Mini or UC browser in their most aggressive data saving modes? How do publishers in those markets address the needs of their users while still remaining compliant with AMP requirements?</p>
<h2 id="conclusion">Conclusion</h2>
<p>I wrote the tweet below as a response to my original tweet.</p>
<p>&lt;blockquote class=&quot;twitter-tweet&quot; data-conversation=&quot;none&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;No, &lt;a href=&quot;https://twitter.com/AMPhtml?ref_src=twsrc%5Etfw&quot;&gt;@AMPhtml&lt;/a&gt; hasn’t fully sold me on it. Too many open issues in AMP that are easy to do in non-amp. Looking at component creation and how hard it is&lt;/p&gt;— Carlos Araya (@elrond25) &lt;a href=&quot;https://twitter.com/elrond25/status/982397639269351425?ref_src=twsrc%5Etfw&quot;&gt;April 6, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</p>
<p>As I've mentioned throughout this post the technology behind AMP is not revolutionary. It's a reaction to a problem on the mobile web and it has been taken as a way to gate keep and restrict what can be done on the web.</p>
<p>There are many unanswered questions about AMP and the direction it's going on for me to be comfortable with it. AMP email and Stories are out, what comes next?</p>
<p>Attempting to make AMP the canonical version of your web content worries me, it means we're moving away from having an HTML version altogether and people may choose to learn AMP but not HTML (sorry, but HTML is the spec that lives at WHATWG and W3C, not AMP) and when AMP limitations become too restrictive will not know how to build web content that doesn't require AMP and be starting from square one again.</p>
<p>It is tempting to draw comparisons between AMP and jQuery but the web was different when jQuery was first introduced. The use cases jQuery dealt with were about smoothing out different ways browsers did things (looking at you, Netscape and IE) and making sure you wouldn't have to write similar code 3 times (one for IE, one for Netscape and one for browsers that supported standards when those became available) but now the technology is available to make sure we do things right, it's a matter of whether we choose to use them wisely or not.</p>
<p>I mentioned earlier but having Amp Stories be completely different to any non-amp alternatives makes me worry as much if not more than making AMP the canonical version of my content. If there is no relation between my web content and the AMP stories that are built around it then what's going to be the content that gets returned by the Googlebot when you search for it? I know this is not, strictly, an AMP issue and more of a search issue but since it's an AMP product it's worth pointing out here.</p>
<p>I'll keep my mind open towards AMP (after all I still provide AMP for my blog content to help people with slow connections or who may have data cost issues) but there are too many open questions about the platform and its direction before I can say I agree with their assessment of how they want to move the web forward.</p>
<h2 id="links-and-resources">Links and Resources</h2>
<ul>
<li>AMP content
<ul>
<li><a href="https://www.ampproject.org/docs/fundamentals/converting">https://www.ampproject.org/docs/fundamentals/converting</a></li>
<li><a href="https://amphtml.wordpress.com/2018/01/09/improving-urls-for-amp-pages/amp/">Improving URLS for AMP Pages</a></li>
<li><a href="https://amphtml.wordpress.com/2018/02/13/amps-new-horizons/amp/">AMP New Horizons</a></li>
</ul>
</li>
<li>AMP Elements/Components/Templates
<ul>
<li><a href="https://www.ampproject.org/docs/reference/components/amp-story">amp-story element</a></li>
<li><a href="https://ampbyexample.com/stories/introduction/amp_story_hello_world/">AMP Story Example</a></li>
<li><a href="https://ampbyexample.com/components/amp-iframe/">amp-iframe element</a></li>
<li><a href="https://ampstart.com/templates#news-blog">News and Blogs Templates</a></li>
</ul>
</li>
<li>AMP Stories
<ul>
<li><a href="https://www.wired.com/story/introducing-amp-stories/">Introducing AMP Stories, A Whole New Way To Read Wired</a></li>
<li><a href="https://www.wired.com/amp-stories/welcome-to-amp-stories/?mbid=IntroArticle">Wired Introductory AMP Story</a></li>
<li><a href="https://searchengineland.com/amp-stories-new-accelerated-mobile-pages-format-google-291907">Search Engine Land Piece on AMP Stories</a></li>
<li><a href="https://www.wordstream.com/blog/ws/2018/02/14/amp-stories">Google Releases AMP Stories: What Are They All About?</a></li>
</ul>
</li>
<li>Governance
<ul>
<li><a href="https://github.com/ampproject/amphtml/issues/13597#issuecomment-367525276">Githubb Discussion</a></li>
</ul>
</li>
<li>AMP at Condé Nast
<ul>
<li><a href="https://technology.condenast.com/story/the-why-and-how-of-google-amp-at-conde-nast">The Why and How of Google AMP at Condé Nast</a></li>
<li><a href="https://technology.condenast.com/story/evolving-google-amp-at-conde-nast">Evolving Google AMP at Condé Nast</a></li>
</ul>
</li>
<li>Questions, Commennts and Criticisms
<ul>
<li>Ethan Marcotte
<ul>
<li><a href="https://ethanmarcotte.com/wrote/i-for-one/">I, for one</a></li>
<li><a href="https://ethanmarcotte.com/wrote/amplified/">AMPlified</a></li>
<li><a href="https://ethanmarcotte.com/wrote/ampersand/">AMPersand</a></li>
</ul>
</li>
<li>Jeremy Keith
<ul>
<li><a href="https://adactio.com/journal/9646">AMPed up</a></li>
<li><a href="https://adactio.com/journal/13035">The meaning of AMP</a></li>
<li><a href="https://adactio.com/journal/12011">In AMP we trust</a></li>
</ul>
</li>
<li>Tim Kladec
<ul>
<li><a href="https://timkadlec.com/remembers/2018-03-19-how-fast-is-amp-really/">How Fast Is Amp Really?</a></li>
<li><a href="https://timkadlec.com/remembers/2018-02-14-the-two-faces-of-amp/">The Two Faces of AMP</a></li>
<li><a href="https://timkadlec.com/2017/03/amp-and-the-web/">AMP and the Web</a></li>
<li><a href="https://timkadlec.com/2015/10/amp-and-incentives/">AMP and Incentives</a></li>
<li><a href="https://timkadlec.com/2016/02/a-standardized-alternative-to-amp/">CPP: A Standardized Alternative to AMP</a></li>
</ul>
</li>
</ul>
</li>
<li>AMP for you (whether you want it or not)
<ul>
<li>Twitter
<ul>
<li><a href="https://searchengineland.com/twitter-ramps-amp-278300">Twitter</a></li>
<li><a href="https://developer.twitter.com/en/docs/publisher-tools/amp/overview">Twitter Developer Docs</a></li>
</ul>
</li>
<li>Wordpress
<ul>
<li><a href="https://en.support.wordpress.com/amp-accelerated-mobile-pages/">Wordpress Support</a></li>
<li><a href="https://techcrunch.com/2016/02/24/wordpress-sites-now-support-googles-amp-to-make-mobile-pages-load-much-faster/">WordPress Sites Now Support Google’s AMP To Make Mobile Pages Load Much Faster</a>
<ul>
<li>Am I reading this correctly in assuming that it was around this date that Wordpress.com made AMP an automatic feature of the platform?</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Other
<ul>
<li><a href="https://css-tricks.com/taking-amp-for-a-spin/">Taking AMP for a Spin</a></li>
<li><a href="https://css-tricks.com/amp-news/">AMP News</a></li>
<li><a href="https://css-tricks.com/need-catch-amp-debate/">Need to Catch Up on the AMP Debate?</a></li>
</ul>
</li>
</ul>

</article>
<!--
</div> -->
<script src="scripts/lazy-load.js"></script>
<script src="scripts/vendor/clipboard.min.js"></script>
<script src="scripts/vendor/prism.js"></script>
<script src="scripts/vendor/fontfaceobserver.js"></script>
<script src="scripts/load-fonts.js"></script>
<script src="scripts/lazy-load-video.js"></script>
</body>
</html>