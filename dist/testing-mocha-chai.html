<html lang="en" dir="ltr" class="no-js lazy">

<head>
  <!--<link rel="stylesheet" href="ccs/github.css">-->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/image-load.css">
  <link rel="stylesheet" href="css/video-load.css">
  <link rel="stylesheet" href="css/prism.css">
  <!-- <script async src="scripts/menu.js"></script> -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <title></title>
</head>

<body>
<article class="container">
  <h1>Testing your code with Mocha and Chai</h1>
<h2>Mocha</h2>
<p><a href="https://mochajs.org/">Mocha</a> is a testing framework that allows you to create testing for your Javascript in a way that easy to read and reason through. There are several assertion ibraries you can use to write your code</p>
<pre><code class="language-javascript">var should = require('chai').should(); //actually call the function
var foo = 'bar'
var beverages = {
  tea: [ 'chai', 'matcha', 'oolong' ],
  coffee: [ 'black', 'nitro']
};

foo.should.be.a('string');
foo.should.equal('bar');
foo.should.have.lengthOf(3);
beverages.should.have.property('tea').with.lengthOf(3);
beverages.should.have.property('coffee').with.lenghtOf(2);
</code></pre>
<h3>Asynchronous code</h3>
<p><a href="https://mochajs.org/#asynchronous-code">https://mochajs.org/#asynchronous-code</a>
<a href="https://mochajs.org/#working-with-promises">https://mochajs.org/#working-with-promises</a>
<a href="https://mochajs.org/#using-async--await">https://mochajs.org/#using-asyncâ€“await</a></p>
<h3>Synchronous Code</h3>
<p><a href="https://mochajs.org/#synchronous-code">https://mochajs.org/#synchronous-code</a>
<a href="https://mochajs.org/#arrow-functions">https://mochajs.org/#arrow-functions</a></p>
<h3>Hooks</h3>
<p><a href="https://mochajs.org/#hooks">https://mochajs.org/#hooks</a></p>
<pre><code class="language-javascript">describe('hooks', function() {

  before(function() {
    // runs before all tests in this block
  });

  after(function() {
    // runs after all tests in this block
  });

  beforeEach(function() {
    // runs before each test in this block
  });

  afterEach(function() {
    // runs after each test in this block
  });

  // test cases
});
</code></pre>
<h2>Using Mocha with Gulp</h2>
<pre><code class="language-javascript">var gulp = require('gulp');
var mocha = require('gulp-mocha');

gulp.task('default', function() {
  return gulp.src(['test/test-*.js'], { read: false })
    .pipe(mocha({
      reporter: 'spec',
      globals: {
        should: require('should')
      }
    }));
});
</code></pre>
<pre><code class="language-javascript">// npm install gulp gulp-mocha gulp-util

var gulp = require('gulp');
var mocha = require('gulp-mocha');
var gutil = require('gulp-util');

gulp.task('default', function() {
      gulp.watch(['lib/**', 'test/**'], ['mocha']);
});

gulp.task('mocha', function() {
    return gulp.src(['test/*.js'], { read: false })
        .pipe(mocha({ reporter: 'list' }))
        .on('error', gutil.log);
});
</code></pre>
<h1>Automating tests with Saucelabs and Mocha/Chai</h1>
<pre><code class="language-javascript">const saucelabs = require('gulp-saucelabs');
const connect   = require('gulp-connect');

// Saucelabs
gulp.task('saucelabs', () =&gt; {
    const config = {
      urls: ['http://localhost:3000/tests/qunit/index.html'],
      testname: 'My test',
      framework: 'qunit',
      browsers: [
          {
              browserName: &quot;MicrosoftEdge&quot;,
              platform: &quot;Windows 10&quot;,
              version: &quot;latest&quot;
          }
      ],
      onTestSuiteComplete: (status) =&gt; {
          if (status) {
              console.log('All tests passed!');
          }
      };
    }

    return saucelabs(config);
});

// Start local http server
gulp.task('connect', () =&gt; {
    connect.server({ port: 3000, root: './' });
});

// Close down the http server
gulp.task('disconnect', () =&gt; {
    connect.serverClose();
});

gulp.task('test-saucelabs', ['connect', 'saucelabs'],
  () =&gt; gulp.start('disconnect'))
</code></pre>

</article>
<!--
</div> -->
<script src="scripts/lazy-load.js"></script>
<script src="scripts/vendor/clipboard.min.js"></script>
<script src="scripts/vendor/prism.js"></script>
<script src="scripts/vendor/fontfaceobserver.js"></script>
<script src="scripts/load-fonts.js"></script>
<script src="scripts/lazy-load-video.js"></script>
</body>
</html>