<html lang="en" dir="ltr" class="no-js lazy">

<head>
  <!--<link rel="stylesheet" href="ccs/github.css">-->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/image-load.css">
  <link rel="stylesheet" href="css/video-load.css">
  <link rel="stylesheet" href="css/prism.css">
  <!-- <script async src="scripts/menu.js"></script> -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <title></title>
</head>

<body>
<article class="container">
  <h1 id="web%2Fxquery-project%3A-interview-database">Web/xQuery project: Interview database</h1>
<p>I'm starting to work with interviews. I would like to be able to get the audio transcribed to text and then store the text and the metadata about the interview in an no-sql/non-relational database that I can then query using either xQuery/NoSQL or SQL databases.</p>
<p>The idea:</p>
<p>&lt;div class=&quot;message info&quot;&gt;
&lt;p&gt;Create a tool to automatically transcribe interviews and other audio files into an XML database. Then use xQuery to build the metadata for the interviews.&lt;/p&gt;
&lt;/div&gt;</p>
<p>These are preliminary notes and ideas, where possible I will try to incorporate code to validate them but it won't be perfect or possible to do everywhere.</p>
<h2 id="tooling-and-processes">Tooling and processes</h2>
<h3 id="speech-to-text-options">Speech to text options</h3>
<table>
<thead>
<tr>
<th>Product</th>
<th>Vendor</th>
<th>Pricing URL</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://cloud.google.com/speech-to-text/">Google speech-to-text</a></td>
<td>Google</td>
<td><a href="https://cloud.google.com/speech-to-text/pricing">Pricing</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://www.microsoft.com/cognitive-services/en-us/speech-api">Microsoft speech-to-text</a></td>
<td>Microsoft</td>
<td><a href="https://azure.microsoft.com/en-us/pricing/details/cognitive-services/speech-api/">Pricing</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://aws.amazon.com/transcribe/">Amazon Transcribe</a></td>
<td>Amazon</td>
<td><a href="https://aws.amazon.com/transcribe/pricing/">Pricing</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://github.com/mozilla/DeepSpeech">Deep Speech</a></td>
<td>Mozilla</td>
<td>Open Source</td>
<td>Released under the <a href="https://www.mozilla.org/en-US/MPL/2.0/">Mozilla Public License 2.0</a>&lt;br/&gt; &lt;br/&gt;Also see <a href="https://opensource.com/article/22/1/voice-text-mozilla-deepspeech">Use Mozilla DeepSpeech to enable speech to text in your application</a>&lt;br/&gt; &lt;br/&gt;Python only, doesn't appear to have a javascript or Node version or wrapper</td>
</tr>
</tbody>
</table>
<p>I realize t hat it wouldn't be long before the APIs start incurring cost, but as an experiment either one of the APIs would work.</p>
<h3 id="identifying-database-options">Identifying database options</h3>
<p>The other area worth researching is whether xQuery is the right solution for this type of project. Other XML/noSQL databases are also a possibility.</p>
<table>
<thead>
<tr>
<th>Vendor</th>
<th>Type</th>
<th>License</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://exist-db.org/">eXist</a></td>
<td>NoSQL</td>
<td>Open Source</td>
<td></td>
</tr>
<tr>
<td><a href="https://www.marklogic.com/">MarkLogic</a></td>
<td>NoSQL</td>
<td>Commercial</td>
<td></td>
</tr>
<tr>
<td><a href="https://www.mongodb.com/">MongoDB</a></td>
<td>NoSQL</td>
<td>Varies</td>
<td></td>
</tr>
<tr>
<td><a href="https://www.postgresql.org/">PostrgreSQL</a></td>
<td>SQL</td>
<td>Open Source</td>
<td></td>
</tr>
</tbody>
</table>
<p>Even if xQuery is the right solution, then what is the best server to work with and how do we store the data? How expensive is it to host such a development solution in the cloud (either on premise or in the cloud)?</p>
<h3 id="creating-a-json-schema-for-the-data">Creating a JSON schema for the data</h3>
<p><a href="https://json-schema.org/">JSON Schemas</a> allows us to create a schema for JSON-based data. This ensures two things:</p>
<ul>
<li>Provides a way to validate the data</li>
<li>Ensures data completeness and accuracy</li>
</ul>
<p>I've validated the schema below using the <a href="https://www.jsonschemavalidator.net/">JSON Schema Validator</a></p>
<h2 id="the-schema">The Schema</h2>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"JSON schema for interviews"</span><span class="token punctuation">,</span>
  <span class="token property">"$schema"</span><span class="token operator">:</span> <span class="token string">"https://json-schema.org/draft/2020-12/schema"</span><span class="token punctuation">,</span>
</code></pre>
<pre class="language-json"><code class="language-json">  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>
  <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"$schema"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Unique identifier for the block"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Title of the interview"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<pre class="language-json"><code class="language-json">    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Type of interview"</span><span class="token punctuation">,</span>
      <span class="token property">"default"</span><span class="token operator">:</span> <span class="token string">"interview"</span><span class="token punctuation">,</span>
      <span class="token property">"enum"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"interview"</span><span class="token punctuation">,</span>
        <span class="token string">"interview-one-on-one"</span><span class="token punctuation">,</span>
        <span class="token string">"interview-group"</span><span class="token punctuation">,</span>
        <span class="token string">"interview-one-on-one-video"</span><span class="token punctuation">,</span>
        <span class="token string">"interview-group-video"</span><span class="token punctuation">,</span>
        <span class="token string">"interview-one-on-one-audio"</span><span class="token punctuation">,</span>
        <span class="token string">"interview-group-audio"</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<pre class="language-json"><code class="language-json">    <span class="token property">"date"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Date of the interview"</span><span class="token punctuation">,</span>
      <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"date"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"location"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Location of the interview"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<pre class="language-json"><code class="language-json">    <span class="token property">"interviewers"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"array"</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Interviewer(s) of the interview"</span><span class="token punctuation">,</span>
      <span class="token property">"minItems"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">"maxItems"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">"items"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"$ref"</span><span class="token operator">:</span> <span class="token string">"#/$defs/person"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"interviewees"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"array"</span><span class="token punctuation">,</span>
      <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Subject(s) of the interview"</span><span class="token punctuation">,</span>
      <span class="token property">"minItems"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">"maxItems"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">"items"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"$ref"</span><span class="token operator">:</span> <span class="token string">"#/$defs/person"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<pre class="language-json"><code class="language-json">    <span class="token property">"audio"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>
      <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"format"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
          <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Format of the audio"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"url"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
          <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"URL of the audio file"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"duration"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span>
          <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Duration of the audio file"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"required"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"format"</span><span class="token punctuation">,</span>
        <span class="token string">"url"</span><span class="token punctuation">,</span>
        <span class="token string">"duration"</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<pre class="language-json"><code class="language-json">    <span class="token property">"transcript"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>
      <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"url"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
          <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"URL of the transcript file"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"content"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
          <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Content of the transcript file"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"required"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"url"</span><span class="token punctuation">,</span>
        <span class="token string">"content"</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"$defs"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"person"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>
      <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
          <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Name of the person"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"email"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
          <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Email of the person"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"required"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"name"</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

</article>
<!--
</div> -->
<script src="scripts/lazy-load.js"></script>
<script src="scripts/vendor/clipboard.min.js"></script>
<script src="scripts/vendor/prism.js"></script>
<script src="scripts/vendor/fontfaceobserver.js"></script>
<script src="scripts/load-fonts.js"></script>
<script src="scripts/lazy-load-video.js"></script>
</body>
</html>