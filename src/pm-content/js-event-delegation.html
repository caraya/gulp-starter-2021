<html lang="en">

<head>
  <!-- <link rel="stylesheet" href="../paged-media/highlight/styles/solarized-light.css"> -->
  <link rel="stylesheet" href="../paged-media/prism/prism.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">
  <title></title>
</head>

<body data-type="book">

  <h1>Event Delegation</h1>
<p>One of the things that took me a while to fully understand is event delegation and the associated concepts of <code>event bubbling</code> and <code>event targeting</code>.</p>
<p>The idea is that, when we add an event listener to an element, there are multiple events triggered and not just on the element the event is attached to.</p>
<p>If we take the following HTML. How can we attach a single event so that it will work in all <code>li</code> elements and those we might add in the future?</p>
<pre><code class="language-html">&lt;ul id=&quot;menu&quot;&gt;
  &lt;li&gt;item 01&lt;/li&gt;
  &lt;li&gt;item 02&lt;/li&gt;
  &lt;li&gt;item 03&lt;/li&gt;
  &lt;li&gt;item 04&lt;/li&gt;
  &lt;li&gt;item 05&lt;/li&gt;
  &lt;li&gt;item 06&lt;/li&gt;
  &lt;li&gt;item 07&lt;/li&gt;
  &lt;li&gt;item 08&lt;/li&gt;
  &lt;li&gt;item 09&lt;/li&gt;
  &lt;li&gt;item 10&lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>When an event is fired on an element that has parent elements (in this case, the <code>li</code> has the <code>ul</code> as a parent), modern browsers run two different phases — the capturing phase and the bubbling phase.</p>
<p>The capturing phase moves from the root of the document (the <code>html</code> element) to the element that triggered the event and executes all the matching event handler code that it finds along the way.</p>
<p>The bubbling phase the exact opposite happens, we start at the element we interacted with has a matching event and, if it doesn’t it ‘bubbles’ upward in the chain, until it hits the root element of the page (<code>html</code>) executing the event handlers it finds along the way.</p>
<p>In modern browsers, by default, all event handlers are registered for the bubbling phase.</p>
<p>If, at any point, you want to stop the propagation use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/stopPropagation">stopPropagation</a>.</p>
<p>If we want to stop the default behavior of an element, for example stop links from navigating to the destination, we need <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault">preventDefault</a>. Note that <code>preventDefault()</code> does not stop propagation, only the element’s default behavior.</p>
<p>This example uses the default bubbling mechanism to create <a href="https://davidwalsh.name/event-delegate">event delegation</a>.</p>
<p>We set up a single click event handler in the <code>ul</code> element rather than the individual children. That way when we click on an <code>li</code> element we get the event we want. Furthermore, if we add <code>li</code> elements to the list to any depth, they will still work with our event.</p>
<pre><code class="language-js">const menu = document.querySelector('#menu');

menu.addEventListener('click', e =&gt; {
    // What was clicked?
    let t = e.target; 
    // if the list item was clicked
    if (t.nodeName.toLowerCase() === 'li') { 
      // print out the link
      console.log(t.innerHTML);
      // Do whatever else you need
      output.innerHTML = t.innerHTML; 
  }
  // Don't follow the links
  e.preventDefault(); 
});
</code></pre>
<p>To set the event listener to capture events from the bottom down, add <code>true</code> as the second parameter of the event listener.</p>
<p>In cases where both types of event handlers are present, bubbling and capturing, the capturing phase will run first, followed by the bubbling phase.</p>


<!-- <script src="../paged-media/highlight/highlight.pack.js"></script> -->
<script src="../paged-media/prism/prism.js"></script>
</body>
</html>