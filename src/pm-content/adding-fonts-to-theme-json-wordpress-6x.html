<html lang="en">

<head>
  <!-- <link rel="stylesheet" href="../paged-media/highlight/styles/solarized-light.css"> -->
  <link rel="stylesheet" href="../paged-media/prism/prism.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">
  <title></title>
</head>

<body data-type="book">

  <h1 id="adding-fonts-to-theme.json-for-wordpress-6.x">Adding fonts to theme.json for WordPress 6.x</h1>
<p>Starting in WordPress 6.1 fonts can be fully defined in <code>theme.json</code> including adding variable fonts to the list of available fonts.</p>
<p>The <code>fontFace</code> syntax in the <code>theme.json</code> file is very similar to what you would use when defining a font using the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face">@font-face</a> at-rule, as described in the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face">@font-face</a> entry in <a href="https://developer.mozilla.org/en-US/">MDN</a> and explained in this <a href="https://css-tricks.com/snippets/css/system-font-stack/">CSS Tricks</a> article.</p>
<h2 id="system-fonts">System Fonts</h2>
<p>The first example uses fonts that are known to be in the system. These are the default fonts across operating systems and the browser will pick the first font it supports.</p>
<p>The <code>font-family</code> attribute contais a list of fonts for this family, the <code>slug</code> attribute the <code>name</code> attribute is the human readable name.</p>
<p>You should only use this system if you can be 100% sure that at least one of the fonts in the stack you choose will be available. Otherwise, the default font (<code>serif</code>, <code>sans-serif</code>, <code>cursive</code> or <code>monospace</code>) can have unpredictable results based on what fonts the user has available on their system.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"typography"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"fontFamilies"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token property">"fontFamily"</span><span class="token operator">:</span> "system-ui<span class="token punctuation">,</span>
      \"Segoe UI\"<span class="token punctuation">,</span>
      Roboto<span class="token punctuation">,</span>
      Oxygen-Sans<span class="token punctuation">,</span>
      Ubuntu<span class="token punctuation">,</span>
      Cantarell<span class="token punctuation">,</span>
      \"Helvetica Neue\"<span class="token punctuation">,</span>
      sans-serif"<span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"System Font"</span><span class="token punctuation">,</span>
      <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"system-font"</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="multiple-instances-of-the-same-font">Multiple instances of the same font</h2>
<p>The most common web font usage is to provide different font files for each style of font.</p>
<p><code>fontWeight</code> 400 defines the regular font weight.</p>
<p><code>fontWeight</code> 700 defines the bold font weight.</p>
<p><code>fontStyle</code> defines if the font is in italics or not</p>
<p>With a combination of these three attributes, we define four instances for the font:</p>
<ul>
<li>Regular (weight 400)</li>
<li>Italics (weight 400)</li>
<li>Bold (weight 700)</li>
<li>Bold-Italics (weight 700)</li>
</ul>
<p>These are the four basic weights. Depending on the project needs we may define additional combinations that register different weights, styles and stretch values.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"typography"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"fontFamilies"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">"fontFace"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"DM Sans"</span><span class="token punctuation">,</span>
            <span class="token property">"fontStretch"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
            <span class="token property">"fontStyle"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
            <span class="token property">"fontWeight"</span><span class="token operator">:</span> <span class="token string">"400"</span><span class="token punctuation">,</span>
            <span class="token property">"src"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">"file:./assets/fonts/dm-sans/DMSans-Regular.woff2"</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"DM Sans"</span><span class="token punctuation">,</span>
            <span class="token property">"fontStretch"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
            <span class="token property">"fontStyle"</span><span class="token operator">:</span> <span class="token string">"italic"</span><span class="token punctuation">,</span>
            <span class="token property">"fontWeight"</span><span class="token operator">:</span> <span class="token string">"400"</span><span class="token punctuation">,</span>
            <span class="token property">"src"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">"file:./assets/fonts/dm-sans/DMSans-Regular-Italic.woff2"</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"DM Sans"</span><span class="token punctuation">,</span>
            <span class="token property">"fontStretch"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
            <span class="token property">"fontStyle"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
            <span class="token property">"fontWeight"</span><span class="token operator">:</span> <span class="token string">"700"</span><span class="token punctuation">,</span>
            <span class="token property">"src"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">"file:./assets/fonts/dm-sans/DMSans-Bold.woff2"</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"DM Sans"</span><span class="token punctuation">,</span>
            <span class="token property">"fontStretch"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
            <span class="token property">"fontStyle"</span><span class="token operator">:</span> <span class="token string">"italic"</span><span class="token punctuation">,</span>
            <span class="token property">"fontWeight"</span><span class="token operator">:</span> <span class="token string">"700"</span><span class="token punctuation">,</span>
            <span class="token property">"src"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">"file:./assets/fonts/dm-sans/DMSans-Bold-Italic.woff2"</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"\"DM Sans\", sans-serif"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"DM Sans"</span><span class="token punctuation">,</span>
        <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"dm-sans"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="variable-fonts">Variable Fonts</h2>
<p>The final example uses a single variable font with both slant/italics and weight axes.</p>
<p>I’ve modified the <code>fontStyle</code> attribute to better reflect the values supported in the font.</p>
<p>Note how the weight is now a range from 200 to 900. When used in CSS this range of values also allow us to use all intermediate values (455, 680 and so on) rather than just multiples of 100 like we could before variable fonts.</p>
<p>This doesn’t mean that all instances of the font will have a -10 degree oblique axis but that we are giving the font an option to match when the text calls for italics/oblique text.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"typography"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"fontFamilies"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token property">"fontFace"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"Inter"</span><span class="token punctuation">,</span>
        <span class="token property">"fontStretch"</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>
        <span class="token property">"fontStyle"</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>
        <span class="token property">"fontWeight"</span><span class="token operator">:</span> <span class="token string">"200 900"</span><span class="token punctuation">,</span>
        <span class="token property">"src"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">"file:./assets/fonts/inter/Inter-VariableFont_slnt,wght.ttf"</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"\"Inter\", sans-serif"</span><span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Inter"</span><span class="token punctuation">,</span>
      <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"inter"</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Some variable fonts have broken the font into two separate file, one for regular styles and one for italics.</p>
<p>Using <a href="https://fonts.google.com/specimen/Source+Serif+Pro">Source Serif Pro</a> as an example we see to <code>fontFace</code> declarations where the only difference is that one is set for a normal, non-italics, font and the other one for italics, both referencing different files.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"typography"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"fontFamilies"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token property">"fontFace"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"Source Serif Pro"</span><span class="token punctuation">,</span>
          <span class="token property">"fontStretch"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token property">"fontStyle"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token property">"fontWeight"</span><span class="token operator">:</span> <span class="token string">"200 900"</span><span class="token punctuation">,</span>
          <span class="token property">"src"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"file:./assets/fonts/source-serif-pro/SourceSerif4Variable-Roman.ttf.woff2"</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"Source Serif Pro"</span><span class="token punctuation">,</span>
          <span class="token property">"fontStretch"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token property">"fontStyle"</span><span class="token operator">:</span> <span class="token string">"italic"</span><span class="token punctuation">,</span>
          <span class="token property">"fontWeight"</span><span class="token operator">:</span> <span class="token string">"200 900"</span><span class="token punctuation">,</span>
          <span class="token property">"src"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"file:./assets/fonts/source-serif-pro/SourceSerif4Variable-Italic.ttf.woff2"</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"\"Source Serif Pro\", serif"</span><span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Source Serif Pro"</span><span class="token punctuation">,</span>
      <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"source-serif-pro"</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="drawbacks">Drawbacks</h2>
<p>Using <code>theme.json</code> to declare fonts works fine if all you’re doing is adding basic attributes.</p>
<p>However I’m not sure if the style engine work with all attributes available with the <code>@font-face</code> at-rule or whether all values of the supported  properties will work or not.</p>
<p>Another reason to say with CSS, at least for advanced typography work, is that the current WordPress style engine doesn’t support <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant">font-variant</a> or its constituent properties:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant-alternates">font-variant-alternates</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant-caps">font-variant-caps</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant-east-asian">font-variant-east-asian</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant-ligatures">font-variant-ligatures</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant-numeric">font-variant-numeric</a></li>
</ul>
<p>Other unsupported OpenType-related features are: <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant-alternates">font-variant-alternates</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant-position">font-variant-position</a> or the lower-level <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-feature-settings">font-feature-settings</a></p>
<p>So there is currently no way to really implement these features in WordPress’ style engine so I have to default to using CSS if I want to leverage a font’s OpenType features.</p>


<!-- <script src="../paged-media/highlight/highlight.pack.js"></script> -->
<script src="../paged-media/prism/prism.js"></script>
</body>
</html>