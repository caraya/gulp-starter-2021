<h1 id="building-long-form-content%3A-variable-fonts">Building long-form content: variable fonts</h1>
<p>Variable fonts are an evolution of the OpenType font specification that enables many different variations of a typeface to be loaded from a single file and a single <code>@font-face</code> declaration.</p>
<p>The single file would be larger than a single font, but in most cases smaller or about the same size as the 4 you might load for body copy. The advantage in choosing the variable font is that you have access to the entire range of weights, widths, and styles available, rather than being constrained to only the few static font files that you would have loaded separately.</p>
<p>You may find that some variable fonts come split into two files: one for uprights and all their variations, and one containing the italic variations. This is sometimes done to reduce the overall file size in cases where the italics aren’t needed or used. It is possible to link them with a common <code>font-family</code> name so you can call them using the same font-family and appropriate font-style.</p>
<p>The <code>@font-face</code> declaration for <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Fonts/Variable_Fonts_Guide">variable fonts</a> is similar to the previous example with some differences.</p>
<p>The values for <code>font-weight</code> and <code>font-stretch</code> take a range of two values for the respective property.</p>
<p>Instead of multiples of 100, you can use any value in the range. In a variable font, <code>font-weight: 451</code> and <code>font-stretch: 72%</code> are valid values in a selector.</p>
<p>Using <a href="https://fonts.google.com/specimen/Roboto+Flex">Roboto Flex</a> as an example, loading the variable font would look like this:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Roboto Flex Regular"</span><span class="token punctuation">;</span>
    <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"./fonts/RobotoFlex-VariableFont_GRAD,XTRA,YOPQ,YTAS,YTDE,YTFI,YTLC,YTUC,opsz,slnt,wdth,wght.woff2"</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff2-variations'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> 100 1000<span class="token punctuation">;</span>
    <span class="token property">font-stretch</span><span class="token punctuation">:</span> 25% 151%<span class="token punctuation">;</span>
    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The value for <code>font-style</code> will depend on whether the font provides italics, slant or both of them.</p>
<p>Creating a <code>@font-face</code> declaration for an italics-only font would look like this:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
 <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'MyVariableFont'</span><span class="token punctuation">;</span>
 <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'path/to/font/file/myvariablefont.woff2'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff2-variations'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token property">font-weight</span><span class="token punctuation">:</span> 125 950<span class="token punctuation">;</span>
 <span class="token property">font-stretch</span><span class="token punctuation">:</span> 75% 125%<span class="token punctuation">;</span>
 <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If the font provides an oblique form for italics, loading the font looks like this:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
 <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'MyVariableFont'</span><span class="token punctuation">;</span>
 <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'path/to/font/file/myvariablefont.woff2'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff2-variations'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token property">font-weight</span><span class="token punctuation">:</span> 125 950<span class="token punctuation">;</span>
 <span class="token property">font-stretch</span><span class="token punctuation">:</span> 75% 125%<span class="token punctuation">;</span>
 <span class="token property">font-style</span><span class="token punctuation">:</span> oblique 0deg 12deg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Regardless of you write the <code>@font-face</code> declaration you would use it the same way, as a value in the <code>font-family</code> attribute, like this:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"MyVariableFont"</span><span class="token punctuation">,</span>
    arial<span class="token punctuation">,</span>
    sans-serif<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="defining-variation-axes">Defining variation axes</h2>
<p>The beauty of working with variable fonts is that, in addition to open type features, they provide additional customization through a set of registerd or standard axes and custom axes.</p>
<p>We will use Roboto Flex (again) as our example. We load the font using this <code>@font-face</code> declaration:</p>
<pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Roboto-Flex"</span><span class="token punctuation">;</span>
    <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"./fonts/RobotoFlex-VariableFont_GRAD,XTRA,YOPQ,YTAS,YTDE,YTFI,YTLC,YTUC,opsz,slnt,wdth,wght.woff2"</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff2-variations'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> 100 1000<span class="token punctuation">;</span>
    <span class="token property">font-stretch</span><span class="token punctuation">:</span> 25% 151%<span class="token punctuation">;</span>
    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Google has made the supported axes obvious by including them in the file name, but this is not always the case and even if they do provide you with the names of the axes it is seldom clear what they do just by looking at the name of the axis in question.</p>
<p>The registed axes (with their equivalent CSS properties) are:</p>
<table>
<thead>
<tr>
<th>Axis Tag</th>
<th>Equivalent CSS Property</th>
</tr>
</thead>
<tbody>
<tr>
<td>“wght”</td>
<td><code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight">font-weight</a></code></td>
</tr>
<tr>
<td>“wdth”</td>
<td><code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-stretch">font-stretch</a></code></td>
</tr>
<tr>
<td>“slnt” (slant)</td>
<td><code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-style">font-style</a></code>: <code>oblique + angle</code></td>
</tr>
<tr>
<td>“ital”</td>
<td><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-style"><code>font-style</code></a>: <code>italic</code></td>
</tr>
<tr>
<td>“opsz”</td>
<td><code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-optical-sizing">font-optical-sizing</a></code></td>
</tr>
</tbody>
</table>
<p><strong>Notes:</strong></p>
<p><strong>Capitalization matters</strong>, all registered axes are lowercase and all custom axes are uppercase.</p>
<p>Just because an axis is a registered axis, it doesn’t mean all fonts make it available.</p>
<p>Custom axes font dependent and allow font designers to to customize anything in their font, for example ascender or descender heights, the size of serifs, or anything else they can imagine.</p>
<p>Any axis can be used as long as the designer gives it a unique 4-character axis. Some will end up becoming more common, and may even become registered over time.</p>
<p>Roboto Flex defines the following custom axes (information taken from <a href="https://material.io/blog/roboto-flex">Roboto … But Make It Flex</a>):</p>
<p><strong>Parametric Counter Width (<code>XTRA</code> in CSS)</strong>
: The Parametric Counter Width axis alters the transparent forms inside and around glyphs in the X dimension. One application is in fine-tuning justification, as it changes the number of characters per line.</p>
<p><strong>Parametric Thin Stroke</strong> (<code>YOPQ</code> in CSS)
: The Parametric Thin Strokes axis alters stroke widths at their thinnest parts, typically in the Y dimension for the Latin script. One use-case is to improve legibility in very small sized text, because it can lower stroke contrast.</p>
<p><strong>Parametric Lowercase Height</strong> (<code>YTLC</code> in CSS)</p>
<p>: The Parametric Lowercase Height axis alters the volume of all space within the lowercase’s vertical alignment zone: the vertical space inside counters of glyphs and the space in their sidebearings. (This adds more space vertically instead of changing the side bearings like tracking does).
: This is not truly an “x-height axis,&quot; since it only adjusts space vertically, and x-height proportions are formed by the relationships of uppercase, lowercase, ascenders and descenders, as well as horizontal forms. There are parametric axes for all of these.</p>
<p><strong>Parametric Uppercase Height</strong> (<code>YTUC</code> in CSS)
: Similarly, the Parametric Uppercase Height axis alters the volume of all space within the uppercase’s vertical alignment.</p>
<p><strong>Parametric Ascender Height</strong> (<code>YTAS</code> in CSS)
: The Parametric Ascender Height axis alters the volume of all space within the ascenders’ vertical alignment zone.</p>
<p><strong>Parametric Descender Depth</strong> (<code>YTDE</code> in CSS)
: The Parametric Descender Depth axis alters the depth of the space within the descenders’ vertical alignment zone, which has a negative value being below the baseline.</p>
<p><strong>Parametric Figure Height</strong> (<code>YTFI</code> in CSS)
: The Parametric Figure Height axis alters the vertical space of figures. It can be used for aligning figures to other vertical zones.</p>
<h2 id="using-variation-axes-in-css">Using variation axes in CSS</h2>
<p>Using the registered axes is fairly straightfoward. You can use the associated CSS properties.</p>
<p>These registered axes are also defined with four-letter values as follows:</p>
<table>
<thead>
<tr>
<th>Axis</th>
<th>four-letter value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Weight</td>
<td>“wght”</td>
</tr>
<tr>
<td>Stretch / Width</td>
<td>“wdth”</td>
</tr>
<tr>
<td>Slant</td>
<td>“slnt”</td>
</tr>
<tr>
<td>Italic</td>
<td>“ital”</td>
</tr>
<tr>
<td>Optical Size</td>
<td>“opsz”</td>
</tr>
</tbody>
</table>
<p>This will become important when we talk about updating values for <code>font-variation-settings</code>, later in the post.</p>
<p>Using custom axes are more difficult since we don’t have a common list of axes available for the font. We can use tooks like <a href="https://wakamaifondue.com">Wakamaifondue</a> will give you a list of the available axes, both registered and custom, available for the font you’re working with.</p>
<p>The biggest issue with variable fonts, as described in <a href="https://pixelambacht.nl/2019/fixing-variable-font-inheritance/">Boiling eggs and fixing the variable font inheritance problem</a>, is that whenever you update one axis of a variable font the ones that are not updated and the default values are used.</p>
<p>As the article indicates, the best solution is to use <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties">CSS Custom Properties</a>. One possible way to do it is like this:</p>
<p>The following block sets custom properties for the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:root">:root</a> pseudo-element, essentially turning them into global variables.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
<span class="token property">--roboto-wght</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>
<span class="token property">--roboto-wdth</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span>
<span class="token property">--roboto-opsz</span><span class="token punctuation">:</span> 14<span class="token punctuation">;</span>
<span class="token property">--roboto-grad</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token property">--roboto-slnt</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token property">--roboto-xtra</span><span class="token punctuation">:</span> 468<span class="token punctuation">;</span>
<span class="token property">--roboto-xopq</span><span class="token punctuation">:</span> 96<span class="token punctuation">;</span>
<span class="token property">--roboto-yopq</span><span class="token punctuation">:</span> 79<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token property">--roboto-ytlc</span><span class="token punctuation">:</span> 514<span class="token punctuation">;</span>
<span class="token property">--roboto-ytuc</span><span class="token punctuation">:</span> 712<span class="token punctuation">;</span>
<span class="token property">--roboto-ytas</span><span class="token punctuation">:</span> 750<span class="token punctuation">;</span>
<span class="token property">--roboto-ytde</span><span class="token punctuation">:</span> -203<span class="token punctuation">;</span>
<span class="token property">--roboto-ytfi</span><span class="token punctuation">:</span> 738<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>We first use them in the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Universal_selectors">universal selector</a> to create our document default font styles</p>
<pre class="language-css"><code class="language-css"><span class="token selector">*</span> <span class="token punctuation">{</span>
  <span class="token property">font-variation-settings</span><span class="token punctuation">:</span> 
    <span class="token string">"wght"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-wght<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"wdth"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-wdth<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"opsz"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-opsz<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"GRAD"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-grad<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"slnt"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-slnt<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"XTRA"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-xtra<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"XOPQ"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-xopq<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"YOPQ"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-yopq<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"YTLC"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-ytlc<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"YTUC"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-ytuc<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"YTAS"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-ytas<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"YTDE"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-ytde<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">"YTFI"</span> <span class="token function">var</span><span class="token punctuation">(</span>--roboto-ytfi<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>With this in place we can override it everywhere that we need to make a change.</p>
<p>We first set Roboto Flex and sans-serif as the <code>font-family</code> for the body and then we can tweak the defaults for whatever element needs it.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Roboto-Flex"</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">strong, b</span> <span class="token punctuation">{</span>
  <span class="token property">--roboto-wght</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">em, i</span> <span class="token punctuation">{</span>
  <span class="token property">--roboto-slnt</span><span class="token punctuation">:</span> -10<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Although, semantically, <code>strong</code> and <code>b</code> and <code>em</code> and <code>i</code> are intended for different purposes, browsers style them the same way so I did the same.</p>
<p>This is just a basic exercise. You can create additional classes and experiment with the custom axes available to the font.</p>
<p>A working example is in this pen:</p>
<iframe height="507" style="width: 100%;" scrolling="no" title="Using CSS Custom Properties to control Variable fonts" src="https://codepen.io/caraya/embed/GRxbEzV?default-tab=css%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/caraya/pen/GRxbEzV">
  Using CSS Custom Properties to control Variable fonts</a> by Carlos Araya (<a href="https://codepen.io/caraya">@caraya</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>
