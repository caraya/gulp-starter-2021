<h1 id="gutenberg-and-web-fonts">Gutenberg and web fonts</h1>
<p>&lt;div class=&quot;message warning&quot;&gt;
&lt;h3&gt;Note:&lt;/h3&gt;
&lt;p&gt;This is another example of expectation management when working with Gutenberg and the full site editor.&lt;/p&gt;
&lt;p&gt;As currently implemented in the Gutenberg plugin, the API will only work with the Full Site Editor... it will not allow you to use the fonts you defined in &lt;code&gt;theme.json&lt;/code&gt; to change the fonts for content inside the templates.&lt;/p&gt;
&lt;p&gt;I am still researching if it's possible to change the font for inline elements inside blocks or specific blocks in a page.&lt;/p&gt;
&lt;/div&gt;</p>
<p>Gutenberg 12.8 introduced the web fonts API intro the Gutenberg plugin to give theme creators and customizers the ability to use web fonts in their themes.</p>
<p>It does so by introducing the <code>fontFace</code> property in the <code>typography</code> object. This is similar to how you define <code>@font-face</code> in CSS.</p>
<p>The <code>@font-face</code> attributes that I've seen used most often are:</p>
<p><code>&quot;fontFamily&quot;</code>
: The stack we will use for the font, including any fallback options.</p>
<p><code>&quot;fontWeight&quot;</code>
: One or two numbers indicating the numeric weight of the font.
: If one number is used then it represents the absolute value of the font weight (for example 700)
: If two numbers are used they represent the range of acceptable values of the font-weight attribute. This is commonly used in <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Fonts/Variable_Fonts_Guide">variable fonts</a>
: The values used in the two number value are font dependent. Not all fonts have the same ranges</p>
<p><code>&quot;fontStyle&quot;</code>
: Either <code>italic</code> or <code>normal</code> to indicate if the font is italics or not.
: If the font makes available a <code>slnt</code> custom axis then you can use code like this: <code>oblique 14deg</code> and change the degree angle to what works with your font
: Some fonts may use custom axes for italics including <code>slnt</code>. Those are not covered in the <code>@font-face</code> CSS attribute or the <code>fontFace</code> attribute we're discussing here.</p>
<p><code>&quot;fontStretch&quot;</code>
: The property uses single keyword value or a single percentage value
: Numerical values are limited to 50% to 200% (inclusive). <strong>Negative values are not allowed</strong>
: If you use a keyword value then the following values are allowed: <code>ultra-condensed</code>, <code>extra-condensed</code>, <code>condensed</code>, <code>semi-condensed</code> <code>normal</code>, <code>semi-expanded</code>, <code>expanded</code>, <code>extra-expanded</code>, <code>ultra-expanded</code>
: It also allows for the <code>normal</code> value for the property</p>
<p><code>&quot;src&quot;</code>
: Gives the source to the file relative to the <code>theme.json</code> file and wrapped as a JSON object.
: You can use any font format supported by your target browsers but see performance notes below</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"typography"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"fontFamilies"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif"</span><span class="token punctuation">,</span>
      <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"system-fonts"</span><span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"System Fonts"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"Geneva, Tahoma, Verdana, sans-serif"</span><span class="token punctuation">,</span>
      <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"geneva-verdana"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"Cambria, Georgia, serif"</span><span class="token punctuation">,</span>
      <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"cambria-georgia"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"Recursive, sans-serif"</span><span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Recursive"</span><span class="token punctuation">,</span>
      <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"recursive"</span><span class="token punctuation">,</span>
      <span class="token property">"fontFace"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"fontFamily"</span><span class="token operator">:</span> <span class="token string">"Recursive"</span><span class="token punctuation">,</span>
          <span class="token property">"fontWeight"</span><span class="token operator">:</span> <span class="token string">"300 1000"</span><span class="token punctuation">,</span>
          <span class="token property">"fontStyle"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token property">"fontStretch"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token property">"fontDisplay"</span><span class="token operator">:</span> <span class="token string">"swap"</span><span class="token punctuation">,</span>
          <span class="token property">"src"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"file:./assets/fonts/recursive-latin-subset.woff2"</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="performance-notes">Performance Notes</h2>
<p>These notes cover some basic aspects of web fonts, particularly format and size reduction.</p>
<h3 id="what-formats-to-use%3F">What formats to use?</h3>
<p>The four most used formats for fonts are:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/TrueType">TTF</a> (True Type Fonts)</li>
<li><a href="https://en.wikipedia.org/wiki/OpenType">OTF</a> (Open Type Fonts)</li>
<li><a href="https://www.w3.org/TR/WOFF/">WOFF</a> (Web Open Font Format 1.0)</li>
<li><a href="https://www.w3.org/TR/WOFF2/">WOFF2</a> (Web Open Font Format 2.0)</li>
</ul>
<p>The decision will depend on what browsers your users have on their devices. Most modern browsers support WOFF2, which is smaller than the other alternatives</p>
<h3 id="subset-your-fonts">subset your fonts</h3>
<p>You can further reduce the site by subsetting a WOFF2 font. While the gains may be marginal, it may still be a good idea to do so.</p>
<p>I've documented the font compression and subsetting process in <a href="https://publishing-project.rivendellweb.net/?p=803748">Font formats for the web and converting from one to another</a></p>
