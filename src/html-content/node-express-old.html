<h1 id="creating-express-applications">Creating Express Applications</h1>
<p>One thing on my long term to-learn cue is creating node applications using express. I've been playing with the idea of also working with GraphQL and this combination gives me the perfect excuse to start with this project.</p>
<p>I'll look at the basics of creating a Node application using Express, learn about Middleware and write routes for our application. We'll look at creating routes for our application API</p>
<p>As of right now this is the software that I want to use:</p>
<ul>
<li>Node</li>
<li>Express and middleware</li>
<li>MongoDB</li>
</ul>
<h2 id="getting-started">Getting started</h2>
<p>Before we get started we'll build our application using the <a href="https://expressjs.com/en/starter/generator.html">Express Application Generator</a>. This provides a good starting point and sensible defaults for our application. We'll configure the application with the following parameters</p>
<ul>
<li>Handlebars template engine</li>
<li>SASS support</li>
</ul>
<pre class="language-bash"><code class="language-bash">express --hbs --css sass express-demo
</code></pre>
<p>After the installation process go to the application directory and install the project's dependencies:</p>
<pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">cd</span> express-demo
<span class="token function">npm</span> <span class="token function">install</span>
</code></pre>
<p>The last step in this section is to test that everything is working properly. Run the following command to start the server:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> run start
</code></pre>
<p>Point your browser to <a href="http://localhost:3000">http://localhost:3000</a></p>
<h3 id="making-things-easier-as-a-developer">Making things easier as a developer</h3>
<p>The start script, as configured, requires you to stop and start the server every time you make a change. We can create a new way to start the server that will automatically restart it when we make changes.</p>
<p>To do this install the <a href="https://nodemon.io/">nodemon</a> package to take care to monitor for changes and restart your application if needed.</p>
<p>Install <code>nodemon</code> globally:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -g nodemon
</code></pre>
<p>Then place a comma on the previous line add the following line to the <code>scripts</code> section of your <code>package.json</code> file.</p>
<pre class="language-json"><code class="language-json"><span class="token property">"devstart"</span><span class="token operator">:</span> <span class="token string">"nodemon bin/www"</span>
</code></pre>
<p>The full script section should now look like this:</p>
<pre class="language-json"><code class="language-json">  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"node ./bin/www"</span><span class="token punctuation">,</span>
    <span class="token property">"devstart"</span><span class="token operator">:</span> <span class="token string">"nodemon bin/www"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<p>When you start your server using the devstart script, <code>npm run devstart</code>, the server will start as normal but will also watch for changes and automatically reboot as needed.</p>
<p>There are situations when this will not work and you will have to manually.</p>
<h2 id="understanding-the-default-installation">Understanding The Default Installation</h2>
<p>When running the Express generator we get a structure like the one below where <code>express-demo</code> is the root of the application and <code>package-lock.json</code> is a new feature of NPM 5.0.</p>
<pre class="language-bash"><code class="language-bash">express-demo/
├── app.js
├── bin
├── node_modules
├── package-lock.json
├── package.json
├── public
├── routes
└── views
</code></pre>
<p><code>app.js</code> is the main entry point for the application.</p>
<p><code>bin/</code> is the directory where we hold binary or executable files. In this case it holds the <code>www</code> script that will start the application.</p>
<p><code>node_modules</code> is where all the plugins and their dependencies are installed.</p>
<p><code>package.json</code> includes metadata about the application and its dependencies.</p>
<p><code>package-lock.json</code> is a new feature of NPM 5.0 and is similar in function to <code>yarn.lock</code> generated when running the Yarn package manager.</p>
<p><code>public</code> holds all our static assets such as images, scripts and style sheets.</p>
<p><code>routes</code> holds one or more routes for the application. Routes tell express what to do when a request matches a specific route. We'll discuss routes in a separate chapter as they are a key part of an Express applications.</p>
<p><code>views</code> hold one or more views for our resources. If a resource matches a route the view iswhat do we show the user? This will also be discussed in more detail in its own chapter.</p>
<h2 id="the-default-application">The default application</h2>
<p>Now that we've seen the structure of the application let's look at <code>app.js</code>, the main entry point for it.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> favicon <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'serve-favicon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> logger <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'morgan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> cookieParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cookie-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> routes <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./routes/index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> users <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./routes/users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>As with all Node applications we have to setup the required plugins for the application using the <code>require</code> syntax. We also require the routes for the application.</p>
<p>As the last step in this section is to define our Express application by assigning it to a variable. We'll use the <code>app</code> through the reminder of the script to reference the Express application.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// view engine setup</span>
app<span class="token punctuation">.</span><span class="token function">engine</span><span class="token punctuation">(</span><span class="token string">'handlebars'</span><span class="token punctuation">,</span> <span class="token function">exphbs</span><span class="token punctuation">(</span><span class="token punctuation">{</span>defaultLayout<span class="token operator">:</span> <span class="token string">'main'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'handlebars'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> routes<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> users<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>We next use <a href="https://expressjs.com/en/api.html#app.set">set</a> to (pun intended) set parameters, in this case the views and what template engine we want to use (<a href="http://handlebarsjs.com/">Handlebars</a> in this case).</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// uncomment after placing your favicon in /public</span>
<span class="token comment">//app.use(favicon(__dirname + '/public/favicon.ico'));</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">logger</span><span class="token punctuation">(</span><span class="token string">'dev'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> extended<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cookieParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>We continue working with the <code>use</code> command to mount additional pieices of middleware for the application. We only  have to do this once for the whote application so it makes sense to do it here.</p>
<p>The items we use are:</p>
<ul>
<li>A logger using <a href="https://github.com/expressjs/morgan">Morgan</a></li>
<li>A JSON Parser (using <a href="https://github.com/expressjs/body-parser">bodyParser</a>)</li>
<li>A URL-Encoded Parser (using <a href="https://github.com/expressjs/body-parser">bodyParser</a>)</li>
<li>A <a href="https://github.com/expressjs/cookie-parser">cookie parser</a></li>
<li>The location of the application's static assets folder</li>
</ul>
<p>The last block is our error handlers.</p>
<p>The first error handler that we use is a page not found error by returning a new error and a status code of 404.</p>
<p>For any other error we create two handlers. The first one will trigger when the application is in development mode (env === development) where it will show the full stack trace for the error.</p>
<p>When we're in production we don't want stack traces to appear to the users so we disable it. We may want to add a log in that case so that we know something broke.</p>
<p>Lastly we export the application by using <code>module.exports = app;</code>.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// catch 404 and forward to error handler</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> err <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Not Found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    err<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">404</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// error handlers</span>
<span class="token comment">// development error handle will print stacktrace</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'env'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>status <span class="token operator">||</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      message<span class="token operator">:</span> err<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
      error<span class="token operator">:</span> err
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// production error handler; no stacktraces leaked to user</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>status <span class="token operator">||</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        message<span class="token operator">:</span> err<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
        error<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


module<span class="token punctuation">.</span>exports <span class="token operator">=</span> app<span class="token punctuation">;</span>
</code></pre>
<p>Now we are really done. Before jumping into routes and views we'll look at the startup script for the application provided by the generator.</p>
<h2 id="the-startup-script">The Startup Script</h2>
<p>The startup script, located in <code>bin/www</code>, does a few things to get the application ready to go:</p>
<p>It sets the port as the value of the <code>port</code> environment variable or a default of 3000 and it starts the server listening on the port we specified. In addition, if the server is configured in debug mode, it prints a message to console indicating what port the server is listening in.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token hashbang comment">#!/usr/bin/env node</span>
<span class="token keyword">var</span> debug <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'debug'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'express-demo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'port'</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> server <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'port'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Express server listening on port '</span> <span class="token operator">+</span>
        server<span class="token punctuation">.</span><span class="token function">address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h1 id="routes">Routes</h1>
<p>Routes tell express what to do when the application receives a path. In the table below are some examples of what would happen if I use a given <a href="http://www.restapitutorial.com/lessons/httpmethods.html">HTTP verb</a> with the exception of patch which is a more difficult version of put in my opinion.</p>
<p>&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Route&lt;/th&gt;
&lt;th&gt;Verb&lt;/th&gt;
&lt;th&gt;Result&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt; / &lt;/td&gt;
&lt;td&gt;get&lt;/td&gt;
&lt;td&gt;Returns the content of the default page&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/about&lt;/td&gt;
&lt;td&gt;get&lt;/td&gt;
&lt;td&gt;Returns content for the about page&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/files/:name&lt;/td&gt;
&lt;td&gt;get&lt;/td&gt;
&lt;td&gt;gets a specific static file &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/projects&lt;/td&gt;
&lt;td&gt;get&lt;/td&gt;
&lt;td&gt;Returns a list of all projects&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/projects&lt;/td&gt;
&lt;td&gt;post&lt;/td&gt;
&lt;td&gt;Creates a new project&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/projects/:project_id&lt;/td&gt;
&lt;td&gt;get&lt;/td&gt;
&lt;td&gt;Gets a single project&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/projects/:project_id&lt;/td&gt;
&lt;td&gt;put&lt;/td&gt;
&lt;td&gt;Updates a single project&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/projects/:project_id&lt;/td&gt;
&lt;td&gt;delete&lt;/td&gt;
&lt;td&gt;Deletes a project&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;summary&gt;
&lt;p&gt;Sample routes, verbs and expected results&lt;/p&gt;
&lt;/summary&gt;
&lt;/table&gt;</p>
<p>For most of the routes outside our projects we want to render a view that has already been built with Handlebars and HTML. <a href="https://expressjs.com/en/api.html#app.render">app.render</a> will take care of this for us. It takes 3 parameters:</p>
<ul>
<li>A view to render</li>
<li>An optional object with local parameters for the view to use</li>
<li>A callback function</li>
</ul>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* GET home page. */</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'Express'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>
</code></pre>
<p>We can also use <a href="https://expressjs.com/en/api.html#router.route">router.route</a> to specify multiple HTTP verbs that apply to the same path.  In the example below the <code>/projects/:project_id</code> use <code>get</code> and <code>put</code> verbs; Rather than create individual routes we create one route using <code>router.route</code> and put the different verbs under it.</p>
<p>Note that these routes will change when we look at how to add content from a database to the routes.</p>
<pre class="language-javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/projects/:project_id'</span><span class="token punctuation">)</span>
  <span class="token comment">// get the project with that id</span>
  <span class="token comment">// accessed at GET http://localhost:8080/api/projects/:project_id</span>
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      Project<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>project_id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> project</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
              res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
          res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>project<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// update the project with this id</span>
  <span class="token comment">// accessed at PUT http://localhost:8080/api/projects/:project_id</span>
  <span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    project<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>project_id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> project</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
          res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      project<span class="token punctuation">.</span>name <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
      project<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span>
              res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
          res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'project updated!'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Another static route to look at is one that will send static files, PDF versions of a specific page for example, when so requested.</p>
<pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/file/:name'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    root<span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/public/files'</span><span class="token punctuation">,</span>
    dotfiles<span class="token operator">:</span> <span class="token string">'deny'</span><span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'x-timestamp'</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'x-sent'</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> fileName <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Sent:'</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>We'll revisit routes when we look at using MongoDB and the Mongoose ORM to build database enabled routes.</p>
<h1 id="views">Views</h1>
<p>Views are how we present the content to the user. We can use full HTML files of we can use templates that combine HTML with special tags that will perform different tasks.</p>
<p>When working with Express' routes one of the first things I discovered is that it expects all Express related files in one directory. I've gotten used to working with a more modular structure where layouts and partials are directories containing handlebar layouts and partials respectively:</p>
<pre class="language-bash"><code class="language-bash">views
├── error.hbs
├── index.hbs
├── layouts
└── partials
</code></pre>
<p>Instead of working in the single directory structure I've installed <code>express-handlebars</code> as a replacement for the standard Handlebars view engine.</p>
<p>Install it as you would any other package:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> express-handlebars
</code></pre>
<p>The configuration looks different too. We specify additional configuration for our default layout, partials and layouts. I'm still experimenting with YAML Front Matter to see if I can specify page specific content</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// view engine setup</span>
app<span class="token punctuation">.</span><span class="token function">engine</span><span class="token punctuation">(</span><span class="token string">'.hbs'</span><span class="token punctuation">,</span> <span class="token function">exphbs</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    extname<span class="token operator">:</span> <span class="token string">'.hbs'</span><span class="token punctuation">,</span>
    defaultLayout<span class="token operator">:</span> <span class="token string">'main'</span><span class="token punctuation">,</span>
    partialsDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'views/partials'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    layoutsDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'views/layouts'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'.hbs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'views'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>The templates you render can be as simple as this HTML template that creates a 2 column layout with an image on the left and text on the right</p>
<pre class="language-handlebars"><code class="language-handlebars">---
title: Rivendellweb Labs
author: Carlos Araya
layout: default
---

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">title</span><span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lead<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>These are the things I've been playing with in the last couple years. They center mostly around publishing, multimedia and storytelling.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>


  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data-vis/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Data Visualization<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span>How to make data easier to understand<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">></span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css-vis<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>CSS Property Visualization<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span>I create a visualization of CSS properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">></span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>layouts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Layout experiments<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span>Inspired by technology, magazines (Wired, Kinfolk)
      and people (Jen Simmons, Rachel Andrew)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">></span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pages-media<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Paged media<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span>Using tools like PrinceXML or Antenna House
      Formatter you can create amazing layouts for
      printed material using only web technologies.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">></span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>webgl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>AR and VR tests<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span>Content created with WebGL, Three.js and A-Frame

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>essays<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Essays<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span>Longer articles that are either a compilation of
      multiple blog posts or unrelated to my technical blog.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
</code></pre>
<p>To a template constructed from JSON data from a <code>projects.json</code> file. It uses more advanced Handlebars features and, along with the corresponding CSS and Javascript, produces a fairly rich user experience.</p>
<pre class="language-handlebars"><code class="language-handlebars">---
title: Project Archive
author: Carlos Araya
layout: default
---
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#>head-content</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/head-content</span><span class="token delimiter punctuation">}}</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#>title-block</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/title-block</span><span class="token delimiter punctuation">}}</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#each</span> <span class="token variable">projects</span><span class="token delimiter punctuation">}}</span></span>
        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">></span> <span class="token variable">project-single</span><span class="token delimiter punctuation">}}</span></span>
      <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/each</span><span class="token delimiter punctuation">}}</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#>footer-block</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/footer-block</span><span class="token delimiter punctuation">}}</span></span>
    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#>botttom-scripts</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/botttom-scripts</span><span class="token delimiter punctuation">}}</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre>
<h1 id="database-layer%3A-mongodb-and-mongoose">Database Layer: MongoDB and Mongoose</h1>
<p>To add databases to our application we need to redefine our routes with database information. This should make the routes easier to read but it introduces additional dependencies.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// grab the things we need</span>
<span class="token keyword">var</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span>
<span class="token keyword">var</span> autoIncrement <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mongodb-autoincrement"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
autoIncrement<span class="token punctuation">.</span><span class="token function">setDefaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    field<span class="token operator">:</span> project_id<span class="token punctuation">,</span>       <span class="token comment">// auto increment field name, default: _id</span>
    step<span class="token operator">:</span> <span class="token number">1</span>                  <span class="token comment">// auto increment step</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// create a schema</span>
<span class="token keyword">var</span> projectSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> String<span class="token punctuation">,</span>
    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    unique<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  project_id<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    unique<span class="token punctuation">,</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  description<span class="token operator">:</span> String<span class="token punctuation">,</span>
  notes<span class="token operator">:</span> String<span class="token punctuation">,</span>
  stage<span class="token operator">:</span> String<span class="token punctuation">,</span>
  type<span class="token operator">:</span> String<span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token punctuation">{</span>
    code<span class="token operator">:</span> String<span class="token punctuation">,</span>
    other<span class="token operator">:</span> String<span class="token punctuation">,</span>
    writeup<span class="token operator">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  created_at<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> Date<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> Date<span class="token punctuation">.</span>now
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  updated_at<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> Date<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> Date<span class="token punctuation">.</span>now
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

schema<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>autoIncrement<span class="token punctuation">.</span>mongoosePlugin<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// the schema is useless so far</span>
<span class="token comment">// we need to create a model using it</span>
<span class="token keyword">var</span> Project <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Project'</span><span class="token punctuation">,</span> projectSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// make this available to our users in our Node applications</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> User<span class="token punctuation">;</span>
</code></pre>
<pre class="language-javascript"><code class="language-javascript">
</code></pre>
<h1 id="static-long-form-content">Static Long Form Content</h1>
<h1 id="graphql-instead-of-rest%3F">GraphQL Instead of REST?</h1>
<p>In a future iteration I may consider experimenting with GraphQL and look at what GraphQL is, how it works and how to create routes that work with GrapQL using GrapQL-js.</p>
<ul>
<li>http://danialk.github.io/blog/2014/12/05/express-4-tutorial-simple-server/</li>
</ul>
